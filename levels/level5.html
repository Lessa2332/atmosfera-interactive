<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—ñ–≤–µ–Ω—å 5: –û–ø–∞–¥–∏ | –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* –ì–ª–æ–±–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ */
        :root {
            --primary: #0a192f;
            --secondary: #112240;
            --accent-blue: #64b5ff;
            --accent-purple: #9d4edd;
            --accent-cyan: #64ffda;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #0a192f 0%, #112240 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .btn-primary, .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--accent-blue);
            border-radius: 15px;
            padding: 12px 25px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            color: white;
        }
        
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(157, 78, 221, 0.4);
        }
        
        .btn-secondary:hover {
            background: rgba(100, 181, 255, 0.2);
            transform: scale(1.05);
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--glass-bg);
            border-radius: 20px;
            border: 2px solid var(--glass-border);
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .back-btn {
            color: var(--accent-blue);
            font-size: 24px;
            text-decoration: none;
            transition: transform 0.3s;
        }
        
        .back-btn:hover {
            transform: translateX(-5px);
        }
        
        .player-info .username {
            font-size: 24px;
            font-weight: 900;
            color: var(--accent-purple);
        }
        
        .player-info .player-class {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .stats {
            display: flex;
            gap: 30px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 700;
        }
        
        .stat-item i {
            color: var(--accent-cyan);
        }
        
        /* –°—Ç–∏–ª—ñ —Ä—ñ–≤–Ω—è */
        .level-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .level-header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(100, 181, 255, 0.1), rgba(157, 78, 221, 0.1));
            border-radius: 25px;
            border: 2px solid var(--accent-purple);
            margin-bottom: 30px;
        }
        
        .level-icon {
            font-size: 60px;
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .level-title {
            font-size: 36px;
            color: var(--accent-blue);
            margin-bottom: 10px;
        }
        
        .hero-subtitle {
            font-size: 18px;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* –Ü–≥—Ä–æ–≤—ñ –∑–æ–Ω–∏ */
        .game-areas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .game-zone {
            background: var(--glass-bg);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--glass-border);
            transition: all 0.3s;
        }
        
        .game-zone:hover {
            border-color: var(--accent-purple);
            box-shadow: 0 10px 30px rgba(157, 78, 221, 0.2);
        }
        
        .zone-title {
            font-size: 22px;
            color: var(--accent-purple);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* –ê–Ω—ñ–º–∞—Ü—ñ—è –æ–ø–∞–¥—ñ–≤ */
        .precipitation-animation-container {
            height: 250px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(to bottom, #4a90e2, #87CEEB);
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .cloud {
            position: absolute;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .rain-drop, .snow-flake, .hail-stone {
            position: absolute;
            animation: fall linear infinite;
        }
        
        .rain-drop {
            background: linear-gradient(to bottom, #64b5ff, #1e88e5);
            width: 3px;
            border-radius: 0 0 10px 10px;
        }
        
        .snow-flake {
            background: white;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            box-shadow: 0 0 5px white;
        }
        
        .hail-stone {
            background: white;
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
        
        @keyframes fall {
            to { transform: translateY(250px); }
        }
        
        @keyframes sway {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(5px); }
        }
        
        /* –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ */
        .precipitation-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .precipitation-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--accent-blue);
            border-radius: 15px;
            padding: 15px;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            font-family: 'Nunito', sans-serif;
        }
        
        .precipitation-btn:hover {
            background: rgba(157, 78, 221, 0.2);
            transform: scale(1.05);
        }
        
        .precipitation-btn.active {
            background: rgba(100, 181, 255, 0.3);
            border-color: var(--accent-purple);
        }
        
        /* –•–º–∞—Ä–∏ */
        .cloud-container {
            width: 300px;
            height: 150px;
            margin: 20px auto;
            position: relative;
        }
        
        .cloud-main {
            width: 200px;
            height: 60px;
            background: white;
            border-radius: 50px;
            position: absolute;
            top: 40px;
            left: 50px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .cloud-part {
            position: absolute;
            background: white;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .cloud-part-1 { width: 80px; height: 80px; top: 20px; left: 30px; }
        .cloud-part-2 { width: 100px; height: 100px; top: 10px; left: 100px; }
        .cloud-part-3 { width: 70px; height: 70px; top: 30px; left: 180px; }
        
        /* –í–∏–º—ñ—Ä—é–≤–∞–ª—å–Ω—ñ –ø—Ä–∏–ª–∞–¥–∏ */
        .measurement-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .measurement-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--glass-border);
        }
        
        .measurement-value {
            font-size: 32px;
            font-weight: 900;
            color: var(--accent-blue);
            margin: 10px 0;
        }
        
        .measurement-unit {
            font-size: 14px;
            opacity: 0.7;
        }
        
        /* –ó–∞–≤–¥–∞–Ω–Ω—è */
        .task-container {
            background: linear-gradient(135deg, rgba(100, 181, 255, 0.1), rgba(157, 78, 221, 0.05));
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--accent-blue);
            margin: 30px 0;
        }
        
        .task-title {
            color: var(--accent-blue);
            font-size: 24px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .task-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .task-item {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .task-item:hover {
            border-color: var(--accent-purple);
            transform: translateY(-3px);
        }
        
        .task-item.selected {
            background: rgba(100, 181, 255, 0.2);
            border-color: var(--accent-blue);
        }
        
        /* –¢–∞–π–º–µ—Ä —Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ */
        .level-stats {
            display: flex;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 20px;
            margin: 25px 0;
            border: 1px solid var(--glass-border);
        }
        
        .stat-item {
            text-align: center;
            flex: 1;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 900;
            color: var(--accent-purple);
        }
        
        .stat-label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .timer-display {
            font-size: 36px;
            font-weight: 900;
            color: var(--accent-cyan);
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: rgba(100, 255, 218, 0.1);
            border-radius: 15px;
            border: 2px solid var(--accent-cyan);
        }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ */
        .result-screen {
            text-align: center;
            padding: 40px;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-emoji {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .result-score {
            font-size: 48px;
            font-weight: 900;
            color: var(--accent-blue);
            margin: 20px 0;
        }
        
        /* –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –∑–ª–∏–≤—É */
        .storm-warning {
            background: linear-gradient(45deg, #FF4444, #FF9500);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            animation: pulse 2s infinite;
            display: none;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        /* –ï—Ñ–µ–∫—Ç–∏ –æ–ø–∞–¥—ñ–≤ */
        .rain-effect .rain-drop {
            animation-duration: 1s;
        }
        
        .snow-effect .snow-flake {
            animation-duration: 3s;
            animation-name: fall, sway;
            animation-timing-function: linear, ease-in-out;
        }
        
        .hail-effect .hail-stone {
            animation-duration: 0.5s;
        }
        
        /* –ö–∞—Ä—Ç–∞ –æ–ø–∞–¥—ñ–≤ */
        .precipitation-map {
            width: 100%;
            height: 200px;
            background: linear-gradient(to bottom, #87CEEB, #E0F6FF);
            border-radius: 15px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }
        
        .map-region {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
        @media (max-width: 768px) {
            .game-areas {
                grid-template-columns: 1fr;
            }
            
            .precipitation-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .level-title {
                font-size: 28px;
            }
            
            .zone-title {
                font-size: 20px;
            }
            
            .cloud-container {
                width: 250px;
                height: 120px;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .game-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .precipitation-map {
                height: 150px;
            }
        }
        
        @media (max-width: 480px) {
            .precipitation-controls {
                grid-template-columns: 1fr;
            }
            
            .level-title {
                font-size: 24px;
            }
            
            .task-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- –•–µ–¥–µ—Ä —Ä—ñ–≤–Ω—è -->
    <header class="game-header">
        <div class="header-left">
            <a href="#" class="back-btn" onclick="goBack()">
                <i class="fas fa-arrow-left"></i>
            </a>
            <div class="player-info">
                <div class="username">üåßÔ∏è –û–ø–∞–¥–∏</div>
                <div class="player-class">–†—ñ–≤–µ–Ω—å 5</div>
            </div>
        </div>
        <div class="stats">
            <div class="stat-item">
                <i class="fas fa-clock"></i>
                <span id="global-timer">05:00</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-star"></i>
                <span id="global-score">0/15</span>
            </div>
        </div>
    </header>
    
    <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="level-container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä—ñ–≤–Ω—è -->
        <section class="level-header">
            <div class="level-icon">üåßÔ∏è</div>
            <h1 class="level-title">–ï–ö–°–ü–ï–†–¢ –û–ü–ê–î–Ü–í</h1>
            <p class="hero-subtitle">–í–∏–≤—á–∏ –≤–∏–¥–∏ –æ–ø–∞–¥—ñ–≤, —ó—Ö —É—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –≤–ø–ª–∏–≤ –Ω–∞ –ø—Ä–∏—Ä–æ–¥—É</p>
        </section>
        
        <!-- –Ü–≥—Ä–æ–≤—ñ –∑–æ–Ω–∏ -->
        <div class="game-areas">
            <!-- –ó–æ–Ω–∞ 1: –í–∏–¥–∏ –æ–ø–∞–¥—ñ–≤ -->
            <div class="game-zone">
                <h3 class="zone-title"><i class="fas fa-cloud-rain"></i> –í–ò–î–ò –û–ü–ê–î–Ü–í</h3>
                
                <div class="measurement-panel">
                    <div class="measurement-card">
                        <div class="measurement-value" id="precipitation-type">–î–æ—â</div>
                        <div class="measurement-unit">—Ç–∏–ø</div>
                        <div>–ü–æ—Ç–æ—á–Ω—ñ –æ–ø–∞–¥–∏</div>
                    </div>
                    
                    <div class="measurement-card">
                        <div class="measurement-value" id="precipitation-intensity">3</div>
                        <div class="measurement-unit">–±–∞–ª—ñ–≤</div>
                        <div>–Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ñ—Å—Ç—å</div>
                    </div>
                    
                    <div class="measurement-card">
                        <div class="measurement-value" id="precipitation-amount">5</div>
                        <div class="measurement-unit">–º–º</div>
                        <div>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</div>
                    </div>
                </div>
                
                <div class="precipitation-animation-container" id="precipitationAnimation">
                    <!-- –•–º–∞—Ä–∏ —Ç–∞ –æ–ø–∞–¥–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
                
                <div class="precipitation-controls">
                    <button class="precipitation-btn" onclick="setPrecipitation('rain', '–ª–µ–≥–∫–∏–π')">
                        <i class="fas fa-cloud-rain"></i>
                        <span>–õ–µ–≥–∫–∏–π –¥–æ—â</span>
                        <small>1-3 –º–º/–≥–æ–¥</small>
                    </button>
                    
                    <button class="precipitation-btn" onclick="setPrecipitation('snow', '–ø–æ–º—ñ—Ä–Ω–∏–π')">
                        <i class="fas fa-snowflake"></i>
                        <span>–°–Ω—ñ–≥–æ–ø–∞–¥</span>
                        <small>2-5 —Å–º/–≥–æ–¥</small>
                    </button>
                    
                    <button class="precipitation-btn" onclick="setPrecipitation('hail', '—Å–∏–ª—å–Ω–∏–π')">
                        <i class="fas fa-cloud-meatball"></i>
                        <span>–ì—Ä–∞–¥</span>
                        <small>5-20 –º–º</small>
                    </button>
                    
                    <button class="precipitation-btn" onclick="setPrecipitation('storm', '—à—Ç–æ—Ä–º')">
                        <i class="fas fa-bolt"></i>
                        <span>–ó–ª–∏–≤–∞</span>
                        <small>10+ –º–º/–≥–æ–¥</small>
                    </button>
                </div>
            </div>
            
            <!-- –ó–æ–Ω–∞ 2: –£—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ö–º–∞—Ä -->
            <div class="game-zone">
                <h3 class="zone-title"><i class="fas fa-cloud"></i> –£–¢–í–û–†–ï–ù–ù–Ø –•–ú–ê–†</h3>
                
                <div class="cloud-container">
                    <div class="cloud-main"></div>
                    <div class="cloud-part cloud-part-1"></div>
                    <div class="cloud-part cloud-part-2"></div>
                    <div class="cloud-part cloud-part-3"></div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <p>–¢–∏–ø —Ö–º–∞—Ä–∏: <strong id="cloudType">–ö—É—á–µ–≤–æ-–¥–æ—â–æ–≤—ñ</strong></p>
                    <p>–í–∏—Å–æ—Ç–∞: <strong id="cloudHeight">2000-5000 –º</strong></p>
                </div>
                
                <div class="precipitation-controls">
                    <button class="precipitation-btn" onclick="changeCloudType('cumulus')">
                        <i class="fas fa-cloud"></i>
                        <span>–ö—É—á–µ–≤—ñ</span>
                    </button>
                    
                    <button class="precipitation-btn" onclick="changeCloudType('stratus')">
                        <i class="fas fa-layer-group"></i>
                        <span>–®–∞—Ä—É–≤–∞—Ç—ñ</span>
                    </button>
                    
                    <button class="precipitation-btn" onclick="changeCloudType('cirrus')">
                        <i class="fas fa-feather-alt"></i>
                        <span>–ü–µ—Ä–∏—Å—Ç—ñ</span>
                    </button>
                    
                    <button class="precipitation-btn" onclick="changeCloudType('nimbus')">
                        <i class="fas fa-cloud-showers-heavy"></i>
                        <span>–î–æ—â–æ–≤—ñ</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –ö–∞—Ä—Ç–∞ –æ–ø–∞–¥—ñ–≤ -->
        <div class="game-zone">
            <h3 class="zone-title"><i class="fas fa-map"></i> –ö–ê–†–¢–ê –û–ü–ê–î–Ü–í</h3>
            
            <div class="precipitation-map" id="precipitationMap">
                <!-- –†–µ–≥—ñ–æ–Ω–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <div style="text-align: center; margin-top: 15px;">
                <p>–û–±–µ—Ä—ñ—Ç—å —Ä–µ–≥—ñ–æ–Ω –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –æ–ø–∞–¥—ñ–≤:</p>
                <div class="precipitation-controls" style="grid-template-columns: repeat(3, 1fr);">
                    <button class="precipitation-btn" onclick="selectRegion('west')">
                        <i class="fas fa-mountain"></i>
                        <span>–ó–∞—Ö—ñ–¥</span>
                    </button>
                    
                    <button class="precipitation-btn" onclick="selectRegion('center')">
                        <i class="fas fa-city"></i>
                        <span>–¶–µ–Ω—Ç—Ä</span>
                    </button>
                    
                    <button class="precipitation-btn" onclick="selectRegion('east')">
                        <i class="fas fa-sun"></i>
                        <span>–°—Ö—ñ–¥</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –∑–ª–∏–≤—É -->
        <div class="storm-warning" id="stormWarning">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>–®–¢–û–†–ú–û–í–ï –ü–û–ü–ï–†–ï–î–ñ–ï–ù–ù–Ø!</strong> –°–∏–ª—å–Ω–∞ –∑–ª–∏–≤–∞ –∑ –≥—Ä–∞–¥–æ–º. –ë—É–¥—å—Ç–µ –æ–±–µ—Ä–µ–∂–Ω—ñ!
        </div>
        
        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 1: –¢–∏–ø–∏ –æ–ø–∞–¥—ñ–≤ -->
        <div class="task-container">
            <h3 class="task-title"><i class="fas fa-question-circle"></i> –ó–ê–í–î–ê–ù–ù–Ø 1: –í–ò–ó–ù–ê–ß –¢–ò–ü –û–ü–ê–î–Ü–í</h3>
            <p>–Ø–∫—ñ –æ–ø–∞–¥–∏ —É—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –ø—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ñ –ø–æ–≤—ñ—Ç—Ä—è –Ω–∏–∂—á–µ 0¬∞C —ñ –º–∞—é—Ç—å –∫—Ä–∏—Å—Ç–∞–ª—ñ—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É?</p>
            
            <div class="task-grid">
                <div class="task-item" onclick="selectAnswer(1, this)">
                    <h4>–î–æ—â</h4>
                    <p>–†—ñ–¥–∫—ñ –æ–ø–∞–¥–∏ —É –≤–∏–≥–ª—è–¥—ñ –∫—Ä–∞–ø–µ–ª—å –≤–æ–¥–∏</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(2, this)">
                    <h4>–°–Ω—ñ–≥</h4>
                    <p>–¢–≤–µ—Ä–¥—ñ –æ–ø–∞–¥–∏ —É –≤–∏–≥–ª—è–¥—ñ –∫—Ä–∏—Å—Ç–∞–ª—ñ–≤ –ª—å–æ–¥—É</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(3, this)">
                    <h4>–ì—Ä–∞–¥</h4>
                    <p>–¢–≤–µ—Ä–¥—ñ –æ–ø–∞–¥–∏ —É –≤–∏–≥–ª—è–¥—ñ –ª—å–æ–¥—è–Ω–∏—Ö –∫—É–ª—å–æ–∫</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(4, this)">
                    <h4>–ú—Ä—è–∫–∞</h4>
                    <p>–î—Ä—ñ–±–Ω–∏–π –¥–æ—â –∑ –¥—É–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –∫—Ä–∞–ø–ª—è–º–∏</p>
                </div>
            </div>
        </div>
        
        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 2: –•–º–∞—Ä–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è -->
        <div class="task-container">
            <h3 class="task-title"><i class="fas fa-cloud"></i> –ó–ê–í–î–ê–ù–ù–Ø 2: –•–ú–ê–†–û–£–¢–í–û–†–ï–ù–ù–Ø</h3>
            <p>–Ø–∫–∏–π –ø—Ä–æ—Ü–µ—Å —î –æ—Å–Ω–æ–≤–Ω–∏–º –ø—Ä–∏ —É—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ö–º–∞—Ä?</p>
            
            <div class="task-grid">
                <div class="task-item" onclick="selectAnswer(5, this)">
                    <h4>–ö–æ–Ω–¥–µ–Ω—Å–∞—Ü—ñ—è</h4>
                    <p>–ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–æ–¥—è–Ω–æ—ó –ø–∞—Ä–∏ –Ω–∞ —Ä—ñ–¥–∏–Ω—É</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(6, this)">
                    <h4>–í–∏–ø–∞—Ä–æ–≤—É–≤–∞–Ω–Ω—è</h4>
                    <p>–ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–æ–¥–∏ –Ω–∞ –≤–æ–¥—è–Ω—É –ø–∞—Ä—É</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(7, this)">
                    <h4>–°—É–±–ª—ñ–º–∞—Ü—ñ—è</h4>
                    <p>–ü–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª—å–æ–¥—É –Ω–∞ –≤–æ–¥—è–Ω—É –ø–∞—Ä—É</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(8, this)">
                    <h4>–ö—Ä–∏—Å—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è</h4>
                    <p>–£—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—Ä–∏—Å—Ç–∞–ª—ñ–≤ –ª—å–æ–¥—É –∑ –≤–æ–¥–∏</p>
                </div>
            </div>
        </div>
        
        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 3: –í–ø–ª–∏–≤ –æ–ø–∞–¥—ñ–≤ -->
        <div class="task-container">
            <h3 class="task-title"><i class="fas fa-tint"></i> –ó–ê–í–î–ê–ù–ù–Ø 3: –í–ü–õ–ò–í –ù–ê –ü–†–ò–†–û–î–£</h3>
            <p>–Ø–∫–∏–π –ø–æ–∑–∏—Ç–∏–≤–Ω–∏–π –≤–ø–ª–∏–≤ –º–∞—é—Ç—å –æ–ø–∞–¥–∏ –Ω–∞ –ø—Ä–∏—Ä–æ–¥—É?</p>
            
            <div class="task-grid">
                <div class="task-item" onclick="selectAnswer(9, this)">
                    <h4>–ñ–∏–≤–ª–µ–Ω–Ω—è —Ä—ñ—á–æ–∫</h4>
                    <p>–ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –∑–∞–ø–∞—Å—ñ–≤ –ø—Ä—ñ—Å–Ω–æ—ó –≤–æ–¥–∏</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(10, this)">
                    <h4>–†–æ–∑–º–∏–≤–∞–Ω–Ω—è “ë—Ä—É–Ω—Ç—É</h4>
                    <p>–ï—Ä–æ–∑—ñ—è —Ç–∞ —Ä—É–π–Ω—É–≤–∞–Ω–Ω—è —Ä–æ–¥—é—á–æ–≥–æ —à–∞—Ä—É</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(11, this)">
                    <h4>–ó–∞—Ç–æ–ø–ª–µ–Ω–Ω—è</h4>
                    <p>–ü—ñ–¥—Ç–æ–ø–ª–µ–Ω–Ω—è –Ω–∞—Å–µ–ª–µ–Ω–∏—Ö –ø—É–Ω–∫—Ç—ñ–≤</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(12, this)">
                    <h4>–ó–ª–µ–¥–µ–Ω—ñ–Ω–Ω—è</h4>
                    <p>–£—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª—å–æ–¥—É –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö</p>
                </div>
            </div>
        </div>
        
        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 4: –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –æ–ø–∞–¥—ñ–≤ -->
        <div class="task-container">
            <h3 class="task-title"><i class="fas fa-ruler"></i> –ó–ê–í–î–ê–ù–ù–Ø 4: –í–ò–ú–Ü–†–Æ–í–ê–ù–ù–Ø</h3>
            <p>–Ø–∫ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –ø—Ä–∏–ª–∞–¥ –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –æ–ø–∞–¥—ñ–≤?</p>
            
            <div class="task-grid">
                <div class="task-item" onclick="selectAnswer(13, this)">
                    <h4>–¢–µ—Ä–º–æ–º–µ—Ç—Ä</h4>
                    <p>–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(14, this)">
                    <h4>–ë–∞—Ä–æ–º–µ—Ç—Ä</h4>
                    <p>–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —Ç–∏—Å–∫—É</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(15, this)">
                    <h4>–û–ø–∞–¥–æ–º—ñ—Ä</h4>
                    <p>–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –æ–ø–∞–¥—ñ–≤</p>
                </div>
                
                <div class="task-item" onclick="selectAnswer(16, this)">
                    <h4>–ê–Ω–µ–º–æ–º–µ—Ç—Ä</h4>
                    <p>–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –≤—ñ—Ç—Ä—É</p>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ñ–≤–Ω—è -->
        <div class="level-stats">
            <div class="stat-item">
                <div class="stat-value" id="correctAnswers">0</div>
                <div class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-value" id="currentScore">0</div>
                <div class="stat-label">–ë–∞–ª–∏</div>
            </div>
            
            <div class="stat-item">
                <div class="stat-value" id="questionsLeft">4</div>
                <div class="stat-label">–ó–∞–ª–∏—à–∏–ª–æ—Å—è –∑–∞–≤–¥–∞–Ω—å</div>
            </div>
        </div>
        
        <!-- –¢–∞–π–º–µ—Ä -->
        <div class="timer-display">
            <i class="fas fa-hourglass-half"></i>
            <span id="levelTimer">05:00</span>
        </div>
        
        <!-- –ö–µ—Ä—É–≤–∞–Ω–Ω—è –≥—Ä–æ—é -->
        <div style="display: flex; justify-content: center; gap: 20px; margin: 30px 0;">
            <button class="btn-secondary" onclick="skipTask()">
                <i class="fas fa-forward"></i> –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è
            </button>
            
            <button class="btn-primary" onclick="checkAllAnswers()" id="checkAnswersBtn">
                <i class="fas fa-check-circle"></i> –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
            </button>
        </div>
        
        <!-- –ï–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
        <div id="resultScreen" class="result-screen">
            <div class="result-emoji" id="resultEmoji">üåßÔ∏è</div>
            <h2 id="resultTitle">–ï–∫—Å–ø–µ—Ä—Ç –æ–ø–∞–¥—ñ–≤!</h2>
            <p id="resultMessage">–¢–∏ –≤—ñ–¥–º—ñ–Ω–Ω–æ —Ä–æ–∑—É–º—ñ—î—à –ø—Ä–∏—Ä–æ–¥—É –æ–ø–∞–¥—ñ–≤!</p>
            
            <div class="result-score" id="finalScore">0/15 –±–∞–ª—ñ–≤</div>
            
            <div style="margin: 30px 0;">
                <h3>–¢–≤–æ—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏:</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0;">
                    <div class="measurement-card">
                        <div class="measurement-value" id="resultCorrect">0</div>
                        <div class="measurement-unit">–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö</div>
                    </div>
                    
                    <div class="measurement-card">
                        <div class="measurement-value" id="resultStars">‚òÜ</div>
                        <div class="measurement-unit">–∑—ñ—Ä–æ–∫</div>
                    </div>
                    
                    <div class="measurement-card">
                        <div class="measurement-value" id="resultTime">0</div>
                        <div class="measurement-unit">—Å–µ–∫—É–Ω–¥</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 40px;">
                <button class="btn-primary" onclick="finishLevel()" style="padding: 15px 40px; font-size: 20px;">
                    <i class="fas fa-trophy"></i> –ó–ê–í–ï–†–®–ò–¢–ò –†–Ü–í–ï–ù–¨
                </button>
            </div>
        </div>
    </main>

    <script>
        // ============ –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø –†–Ü–í–ù–Ø ============
        const LEVEL_CONFIG = {
            totalTime: 300, // 5 —Ö–≤–∏–ª–∏–Ω —É —Å–µ–∫—É–Ω–¥–∞—Ö
            totalQuestions: 4,
            maxScore: 15, // 4 –∑–∞–≤–¥–∞–Ω–Ω—è √ó –¥–æ 4 –±–∞–ª—ñ–≤ –∫–æ–∂–Ω–µ
            
            correctAnswers: {
                1: false, 2: true,  3: false, 4: false,
                5: true,  6: false, 7: false, 8: false,
                9: true,  10: false, 11: false, 12: false,
                13: false, 14: false, 15: true, 16: false
            },
            
            questions: [
                {
                    id: 1,
                    text: "–Ø–∫—ñ –æ–ø–∞–¥–∏ —É—Ç–≤–æ—Ä—é—é—Ç—å—Å—è –ø—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ñ –ø–æ–≤—ñ—Ç—Ä—è –Ω–∏–∂—á–µ 0¬∞C —ñ –º–∞—é—Ç—å –∫—Ä–∏—Å—Ç–∞–ª—ñ—á–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É?",
                    correct: 2,
                    points: 4
                },
                {
                    id: 2,
                    text: "–Ø–∫–∏–π –ø—Ä–æ—Ü–µ—Å —î –æ—Å–Ω–æ–≤–Ω–∏–º –ø—Ä–∏ —É—Ç–≤–æ—Ä–µ–Ω–Ω—ñ —Ö–º–∞—Ä?",
                    correct: 5,
                    points: 4
                },
                {
                    id: 3,
                    text: "–Ø–∫–∏–π –ø–æ–∑–∏—Ç–∏–≤–Ω–∏–π –≤–ø–ª–∏–≤ –º–∞—é—Ç—å –æ–ø–∞–¥–∏ –Ω–∞ –ø—Ä–∏—Ä–æ–¥—É?",
                    correct: 9,
                    points: 4
                },
                {
                    id: 4,
                    text: "–Ø–∫ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –ø—Ä–∏–ª–∞–¥ –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –æ–ø–∞–¥—ñ–≤?",
                    correct: 15,
                    points: 3
                }
            ]
        };

        // ============ –ó–ú–Ü–ù–ù–Ü –ì–†–ò ============
        let gameState = {
            precipitationType: 'rain',
            precipitationIntensity: '–ª–µ–≥–∫–∏–π',
            cloudType: 'cumulus',
            selectedRegion: 'center',
            selectedAnswers: {},
            score: 0,
            correctCount: 0,
            timeLeft: LEVEL_CONFIG.totalTime,
            timerInterval: null,
            gameCompleted: false
        };

        // ============ –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø –ì–†–ò ============
        function initGame() {
            setPrecipitation('rain', '–ª–µ–≥–∫–∏–π');
            changeCloudType('cumulus');
            generatePrecipitationAnimation();
            generatePrecipitationMap();
            startTimer();
            updateDisplay();
        }

        function goBack() {
            if (confirm('–¢–∏ –≤–ø–µ–≤–Ω–µ–Ω–∏–π, —â–æ —Ö–æ—á–µ—à –≤–∏–π—Ç–∏? –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –Ω–µ –±—É–¥—É—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω—ñ.')) {
                window.location.href = 'index.html';
            }
        }

        // ============ –¢–ê–ô–ú–ï–† ============
        function startTimer() {
            gameState.timerInterval = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerInterval);
                    if (!gameState.gameCompleted) {
                        finishGame();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            
            document.getElementById('levelTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            document.getElementById('global-timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ============ –û–ü–ê–î–ò ============
        function setPrecipitation(type, intensity) {
            gameState.precipitationType = type;
            gameState.precipitationIntensity = intensity;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            const typeNames = {
                'rain': '–î–æ—â',
                'snow': '–°–Ω—ñ–≥',
                'hail': '–ì—Ä–∞–¥',
                'storm': '–ó–ª–∏–≤–∞'
            };
            
            document.getElementById('precipitation-type').textContent = typeNames[type];
            document.getElementById('precipitation-intensity').textContent = 
                intensity === '–ª–µ–≥–∫–∏–π' ? '2' : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? '4' : intensity === '—Å–∏–ª—å–Ω–∏–π' ? '7' : '9';
            
            // –ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø–∞–¥—ñ–≤
            let amount = 0;
            if (type === 'rain') amount = intensity === '–ª–µ–≥–∫–∏–π' ? 3 : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? 8 : 15;
            else if (type === 'snow') amount = intensity === '–ª–µ–≥–∫–∏–π' ? 2 : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? 5 : 12;
            else if (type === 'hail') amount = intensity === '–ª–µ–≥–∫–∏–π' ? 5 : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? 12 : 20;
            else amount = 25;
            
            document.getElementById('precipitation-amount').textContent = amount;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –∞–Ω—ñ–º–∞—Ü—ñ—é
            updatePrecipitationAnimation(type, intensity);
            
            // –ü–æ–∫–∞–∑—É—î–º–æ/—Ö–æ–≤–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
            const warning = document.getElementById('stormWarning');
            warning.style.display = (type === 'storm' || (type === 'hail' && intensity === '—Å–∏–ª—å–Ω–∏–π')) ? 'block' : 'none';
            
            // –ê–∫—Ç–∏–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.precipitation-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function changeCloudType(type) {
            gameState.cloudType = type;
            
            const cloudInfo = {
                'cumulus': { name: '–ö—É—á–µ–≤—ñ', height: '500-2000 –º' },
                'stratus': { name: '–®–∞—Ä—É–≤–∞—Ç—ñ', height: '0-500 –º' },
                'cirrus': { name: '–ü–µ—Ä–∏—Å—Ç—ñ', height: '6000-12000 –º' },
                'nimbus': { name: '–ö—É—á–µ–≤–æ-–¥–æ—â–æ–≤—ñ', height: '2000-5000 –º' }
            };
            
            document.getElementById('cloudType').textContent = cloudInfo[type].name;
            document.getElementById('cloudHeight').textContent = cloudInfo[type].height;
            
            // –ê–∫—Ç–∏–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.precipitation-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function generatePrecipitationAnimation() {
            const container = document.getElementById('precipitationAnimation');
            container.innerHTML = '';
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ —Ö–º–∞—Ä–∏
            for (let i = 0; i < 3; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';
                cloud.style.width = `${Math.random() * 100 + 50}px`;
                cloud.style.height = `${Math.random() * 40 + 20}px`;
                cloud.style.top = `${Math.random() * 50}px`;
                cloud.style.left = `${Math.random() * 80}%`;
                cloud.style.opacity = `${Math.random() * 0.5 + 0.5}`;
                container.appendChild(cloud);
            }
            
            updatePrecipitationAnimation('rain', '–ª–µ–≥–∫–∏–π');
        }

        function updatePrecipitationAnimation(type, intensity) {
            const container = document.getElementById('precipitationAnimation');
            container.className = 'precipitation-animation-container';
            
            // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä—ñ –æ–ø–∞–¥–∏
            const oldPrecipitation = container.querySelectorAll('.rain-drop, .snow-flake, .hail-stone');
            oldPrecipitation.forEach(el => el.remove());
            
            // –î–æ–¥–∞—î–º–æ –Ω–æ–≤—ñ –æ–ø–∞–¥–∏
            let count = 0;
            let className = '';
            
            switch(type) {
                case 'rain':
                    className = 'rain-drop';
                    count = intensity === '–ª–µ–≥–∫–∏–π' ? 30 : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? 60 : 100;
                    container.classList.add('rain-effect');
                    break;
                case 'snow':
                    className = 'snow-flake';
                    count = intensity === '–ª–µ–≥–∫–∏–π' ? 20 : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? 40 : 70;
                    container.classList.add('snow-effect');
                    break;
                case 'hail':
                    className = 'hail-stone';
                    count = intensity === '–ª–µ–≥–∫–∏–π' ? 15 : intensity === '–ø–æ–º—ñ—Ä–Ω–∏–π' ? 30 : 50;
                    container.classList.add('hail-effect');
                    break;
                case 'storm':
                    className = 'rain-drop';
                    count = 150;
                    container.classList.add('rain-effect');
                    break;
            }
            
            for (let i = 0; i < count; i++) {
                const element = document.createElement('div');
                element.className = className;
                
                if (type === 'rain') {
                    element.style.height = `${Math.random() * 20 + 10}px`;
                    element.style.left = `${Math.random() * 100}%`;
                    element.style.animationDelay = `${Math.random() * 2}s`;
                    element.style.animationDuration = `${Math.random() * 0.5 + 0.5}s`;
                } else if (type === 'snow') {
                    element.style.left = `${Math.random() * 100}%`;
                    element.style.animationDelay = `${Math.random() * 5}s`;
                    element.style.animationDuration = `${Math.random() * 2 + 2}s`;
                } else if (type === 'hail') {
                    element.style.left = `${Math.random() * 100}%`;
                    element.style.animationDelay = `${Math.random() * 1}s`;
                    element.style.animationDuration = `${Math.random() * 0.3 + 0.2}s`;
                }
                
                container.appendChild(element);
            }
        }

        // ============ –ö–ê–†–¢–ê –û–ü–ê–î–Ü–í ============
        function generatePrecipitationMap() {
            const map = document.getElementById('precipitationMap');
            map.innerHTML = '';
            
            const regions = [
                { id: 'west', name: '–ó–∞—Ö—ñ–¥', left: '10%', top: '30%', width: '25%', height: '60%', color: 'rgba(100, 181, 255, 0.6)' },
                { id: 'center', name: '–¶–µ–Ω—Ç—Ä', left: '37.5%', top: '20%', width: '25%', height: '70%', color: 'rgba(157, 78, 221, 0.6)' },
                { id: 'east', name: '–°—Ö—ñ–¥', left: '65%', top: '40%', width: '25%', height: '50%', color: 'rgba(100, 255, 218, 0.6)' }
            ];
            
            regions.forEach(region => {
                const regionDiv = document.createElement('div');
                regionDiv.className = 'map-region';
                regionDiv.id = `region-${region.id}`;
                regionDiv.textContent = region.name;
                regionDiv.style.left = region.left;
                regionDiv.style.top = region.top;
                regionDiv.style.width = region.width;
                regionDiv.style.height = region.height;
                regionDiv.style.backgroundColor = region.color;
                
                map.appendChild(regionDiv);
            });
            
            selectRegion('center');
        }

        function selectRegion(regionId) {
            gameState.selectedRegion = regionId;
            
            // –°–∫–∏–¥–∞—î–º–æ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è
            document.querySelectorAll('.map-region').forEach(region => {
                region.style.border = '2px solid rgba(255, 255, 255, 0.5)';
                region.style.transform = 'scale(1)';
            });
            
            // –í–∏–¥—ñ–ª—è—î–º–æ –≤–∏–±—Ä–∞–Ω–∏–π —Ä–µ–≥—ñ–æ–Ω
            const selectedRegion = document.getElementById(`region-${regionId}`);
            selectedRegion.style.border = '3px solid white';
            selectedRegion.style.transform = 'scale(1.05)';
            
            // –ê–∫—Ç–∏–≤—É—î–º–æ –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.precipitation-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // –ü–æ–∫–∞–∑—É—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –æ–ø–∞–¥–∏ –≤ —Ä–µ–≥—ñ–æ–Ω—ñ
            const precipitationData = {
                'west': { type: '–î–æ—â', amount: '8 –º–º', intensity: '–ü–æ–º—ñ—Ä–Ω–∞' },
                'center': { type: '–°–Ω—ñ–≥', amount: '3 —Å–º', intensity: '–õ–µ–≥–∫–∞' },
                'east': { type: '–ë–µ–∑ –æ–ø–∞–¥—ñ–≤', amount: '0 –º–º', intensity: '–í—ñ–¥—Å—É—Ç–Ω—è' }
            };
            
            alert(`–†–µ–≥—ñ–æ–Ω: ${regionId === 'west' ? '–ó–∞—Ö—ñ–¥' : regionId === 'center' ? '–¶–µ–Ω—Ç—Ä' : '–°—Ö—ñ–¥'}\n–û–ø–∞–¥–∏: ${precipitationData[regionId].type}\n–ö—ñ–ª—å–∫—ñ—Å—Ç—å: ${precipitationData[regionId].amount}\n–Ü–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ñ—Å—Ç—å: ${precipitationData[regionId].intensity}`);
        }

        // ============ –í–Ü–î–ü–û–í–Ü–î–Ü –ù–ê –ó–ê–í–î–ê–ù–ù–Ø ============
        function selectAnswer(answerId, element) {
            let questionNumber = 1;
            if (answerId >= 5 && answerId <= 8) questionNumber = 2;
            else if (answerId >= 9 && answerId <= 12) questionNumber = 3;
            else if (answerId >= 13 && answerId <= 16) questionNumber = 4;
            
            const startId = (questionNumber - 1) * 4 + 1;
            const items = document.querySelectorAll('.task-item');
            const startIndex = (questionNumber - 1) * 4;
            
            for (let i = startIndex; i < startIndex + 4; i++) {
                if (items[i]) items[i].classList.remove('selected');
            }
            
            element.classList.add('selected');
            gameState.selectedAnswers[questionNumber] = answerId;
            updateDisplay();
        }

        function checkAllAnswers() {
            if (gameState.gameCompleted) return;
            
            let correct = 0;
            let totalScore = 0;
            
            for (let i = 1; i <= LEVEL_CONFIG.totalQuestions; i++) {
                const selectedAnswer = gameState.selectedAnswers[i];
                const correctAnswer = LEVEL_CONFIG.questions[i-1].correct;
                
                const taskItems = document.querySelectorAll('.task-item');
                const startIndex = (i-1) * 4;
                
                if (selectedAnswer === correctAnswer) {
                    correct++;
                    totalScore += LEVEL_CONFIG.questions[i-1].points;
                    
                    if (taskItems[startIndex + (correctAnswer % 4 === 0 ? 3 : (correctAnswer % 4) - 1)]) {
                        taskItems[startIndex + (correctAnswer % 4 === 0 ? 3 : (correctAnswer % 4) - 1)].style.borderColor = '#64b5ff';
                        taskItems[startIndex + (correctAnswer % 4 === 0 ? 3 : (correctAnswer % 4) - 1)].style.background = 'rgba(100, 181, 255, 0.1)';
                    }
                } else if (selectedAnswer) {
                    if (taskItems[startIndex + (selectedAnswer % 4 === 0 ? 3 : (selectedAnswer % 4) - 1)]) {
                        taskItems[startIndex + (selectedAnswer % 4 === 0 ? 3 : (selectedAnswer % 4) - 1)].style.borderColor = '#ff4444';
                        taskItems[startIndex + (selectedAnswer % 4 === 0 ? 3 : (selectedAnswer % 4) - 1)].style.background = 'rgba(255, 68, 68, 0.1)';
                    }
                    
                    if (taskItems[startIndex + (correctAnswer % 4 === 0 ? 3 : (correctAnswer % 4) - 1)]) {
                        taskItems[startIndex + (correctAnswer % 4 === 0 ? 3 : (correctAnswer % 4) - 1)].style.borderColor = '#64b5ff';
                        taskItems[startIndex + (correctAnswer % 4 === 0 ? 3 : (correctAnswer % 4) - 1)].style.background = 'rgba(100, 181, 255, 0.1)';
                    }
                }
            }
            
            gameState.correctCount = correct;
            gameState.score = totalScore;
            
            const questionsCompleted = Object.keys(gameState.selectedAnswers).length;
            if (questionsCompleted < LEVEL_CONFIG.totalQuestions) {
                alert(`–í–∏ –≤—ñ–¥–ø–æ–≤—ñ–ª–∏ –Ω–∞ ${questionsCompleted} –∑ ${LEVEL_CONFIG.totalQuestions} –∑–∞–≤–¥–∞–Ω—å. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ!`);
                return;
            }
            
            finishGame();
        }

        function skipTask() {
            for (let i = 1; i <= LEVEL_CONFIG.totalQuestions; i++) {
                if (!gameState.selectedAnswers[i]) {
                    const correctAnswer = LEVEL_CONFIG.questions[i-1].correct;
                    const answerElements = document.querySelectorAll('.task-item');
                    let startIndex = (i-1) * 4;
                    
                    for (let j = 0; j < 4; j++) {
                        const answerId = startIndex + 1 + j;
                        if (answerId === correctAnswer) {
                            const element = answerElements[startIndex + j];
                            selectAnswer(correctAnswer, element);
                            break;
                        }
                    }
                    
                    alert(`–ó–∞–≤–¥–∞–Ω–Ω—è ${i} –ø—Ä–æ–ø—É—â–µ–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –±—É–ª–∞ –≤–∏–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.`);
                    break;
                }
            }
            updateDisplay();
        }

        // ============ –ó–ê–í–ï–†–®–ï–ù–ù–Ø –ì–†–ò ============
        function finishGame() {
            gameState.gameCompleted = true;
            clearInterval(gameState.timerInterval);
            
            const percentage = (gameState.score / LEVEL_CONFIG.maxScore) * 100;
            let emoji = "üåßÔ∏è", title = "–ï–∫—Å–ø–µ—Ä—Ç –æ–ø–∞–¥—ñ–≤!", message = "–¢–∏ –≤—ñ–¥–º—ñ–Ω–Ω–æ —Ä–æ–∑—É–º—ñ—î—à –ø—Ä–∏—Ä–æ–¥—É –æ–ø–∞–¥—ñ–≤!", stars = "‚òÖ‚òÖ‚òÖ";
            
            if (percentage >= 90) {
                emoji = "üéØ"; title = "–Ü–¥–µ–∞–ª—å–Ω–æ!"; message = "–¢–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥!"; stars = "‚≠ê‚≠ê‚≠ê";
            } else if (percentage >= 75) {
                emoji = "üëç"; title = "–î–æ–±—Ä–µ!"; message = "–¢–∏ –¥–æ–±—Ä–µ –∑–Ω–∞—î—à —Ç–µ–º—É –æ–ø–∞–¥—ñ–≤!"; stars = "‚≠ê‚≠ê‚òÜ";
            } else if (percentage >= 60) {
                emoji = "üòä"; title = "–ù–µ–ø–æ–≥–∞–Ω–æ!"; message = "–¢–∏ —Ä–æ–∑—É–º—ñ—î—à –æ—Å–Ω–æ–≤–∏, –ø—Ä–æ–¥–æ–≤–∂—É–π –≤–∏–≤—á–∞—Ç–∏!"; stars = "‚≠ê‚òÜ‚òÜ";
            } else {
                emoji = "üìö"; title = "–¢—Ä–µ–±–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏"; message = "–ü–æ–≤—Ç–æ—Ä–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª –ø—Ä–æ –æ–ø–∞–¥–∏ —â–µ —Ä–∞–∑!"; stars = "‚òÜ‚òÜ‚òÜ";
            }
            
            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('finalScore').textContent = `${gameState.score}/${LEVEL_CONFIG.maxScore} –±–∞–ª—ñ–≤`;
            document.getElementById('resultCorrect').textContent = gameState.correctCount;
            document.getElementById('resultStars').textContent = stars;
            document.getElementById('resultTime').textContent = LEVEL_CONFIG.totalTime - gameState.timeLeft;
            document.getElementById('global-score').textContent = `${gameState.score}/${LEVEL_CONFIG.maxScore}`;
            document.getElementById('resultScreen').style.display = 'block';
            document.getElementById('resultScreen').scrollIntoView({ behavior: 'smooth' });
            
            document.querySelectorAll('.task-item').forEach(item => {
                item.style.pointerEvents = 'none';
            });
            document.getElementById('checkAnswersBtn').style.display = 'none';
        }

        function finishLevel() {
            const levelResults = {
                level: 5,
                score: gameState.score,
                maxScore: LEVEL_CONFIG.maxScore,
                correctAnswers: gameState.correctCount,
                totalQuestions: LEVEL_CONFIG.totalQuestions,
                timeSpent: LEVEL_CONFIG.totalTime - gameState.timeLeft,
                completed: true,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('atmosphere_level_5', JSON.stringify(levelResults));
            updateGlobalStats();
            alert('–†—ñ–≤–µ–Ω—å 5 –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–æ.');
            window.location.href = 'index.html';
        }

        function updateGlobalStats() {
            let globalStats = JSON.parse(localStorage.getItem('atmosphere_stats')) || {
                totalScore: 0,
                levelsCompleted: 0,
                totalTime: 0
            };
            
            globalStats.totalScore += gameState.score;
            globalStats.levelsCompleted++;
            globalStats.totalTime += (LEVEL_CONFIG.totalTime - gameState.timeLeft);
            
            localStorage.setItem('atmosphere_stats', JSON.stringify(globalStats));
        }

        // ============ –û–ù–û–í–õ–ï–ù–ù–Ø –Ü–ù–¢–ï–†–§–ï–ô–°–£ ============
        function updateDisplay() {
            document.getElementById('correctAnswers').textContent = gameState.correctCount;
            document.getElementById('currentScore').textContent = gameState.score;
            const questionsCompleted = Object.keys(gameState.selectedAnswers).length;
            document.getElementById('questionsLeft').textContent = LEVEL_CONFIG.totalQuestions - questionsCompleted;
            document.getElementById('global-score').textContent = `${gameState.score}/${LEVEL_CONFIG.maxScore}`;
            
            const checkBtn = document.getElementById('checkAnswersBtn');
            if (questionsCompleted === LEVEL_CONFIG.totalQuestions) {
                checkBtn.disabled = false;
                checkBtn.style.opacity = '1';
            } else {
                checkBtn.disabled = true;
                checkBtn.style.opacity = '0.7';
            }
        }

        // ============ –î–û–î–ê–¢–ö–û–í–Ü –§–£–ù–ö–¶–Ü–á ============
        function simulateWaterCycle() {
            alert("üíß –í–æ–¥–Ω–∏–π —Ü–∏–∫–ª:\n1. –í–∏–ø–∞—Ä–æ–≤—É–≤–∞–Ω–Ω—è –≤–æ–¥–∏ –∑ –ø–æ–≤–µ—Ä—Ö–Ω—ñ\n2. –ö–æ–Ω–¥–µ–Ω—Å–∞—Ü—ñ—è –≤–æ–¥—è–Ω–æ—ó –ø–∞—Ä–∏ –≤ —Ö–º–∞—Ä–∏\n3. –í–∏–ø–∞–¥–∞–Ω–Ω—è –æ–ø–∞–¥—ñ–≤\n4. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –≤–æ–¥–∏ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω—é\n5. –ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è —Ü–∏–∫–ª—É");
            
            // –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ü–∏–∫–ª—É
            const types = ['rain', 'snow', 'hail'];
            let current = 0;
            
            const cycle = setInterval(() => {
                setPrecipitation(types[current], '–ø–æ–º—ñ—Ä–Ω–∏–π');
                current++;
                if (current >= types.length) {
                    clearInterval(cycle);
                    setPrecipitation('rain', '–ª–µ–≥–∫–∏–π');
                    alert("–¶–∏–∫–ª –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –û–ø–∞–¥–∏ - –≤–∞–∂–ª–∏–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –≤–æ–¥–Ω–æ–≥–æ —Ü–∏–∫–ª—É –ó–µ–º–ª—ñ.");
                }
            }, 2000);
        }

        // ============ –ó–ê–ü–£–°–ö –ì–†–ò –ü–†–ò –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ü ============
        window.addEventListener('load', initGame);
    </script>
</body>
</html>
