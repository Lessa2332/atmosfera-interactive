<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è - –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .level-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        
        .quiz-question {
            background: var(--glass-bg);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid var(--accent-orange);
        }
        
        .options-grid {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }
        
        .option-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid var(--glass-border);
            padding: 18px;
            border-radius: 15px;
            text-align: left;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-btn:hover {
            background: rgba(255, 149, 0, 0.2);
            border-color: var(--accent-orange);
        }
        
        .option-btn.correct {
            background: rgba(57, 255, 20, 0.3);
            border-color: var(--accent-lime);
        }
        
        .option-btn.wrong {
            background: rgba(255, 0, 0, 0.3);
            border-color: #FF0000;
        }
        
        .game-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .score-display {
            text-align: center;
            font-size: 24px;
            font-weight: 900;
            margin: 20px 0;
            color: var(--accent-orange);
        }
    </style>
</head>
<body>
    <header class="game-header">
        <div class="header-left">
            <a href="../game.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
            </a>
            <div class="player-info">
                <div class="level-title">üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è</div>
            </div>
        </div>
        <div class="timer" id="timer">‚è±Ô∏è 03:00</div>
    </header>
    
    <main class="level-container">
        <div class="score-display">
            –ë–∞–ª–∏: <span id="current-score">0</span> | 
            –ó—ñ—Ä–æ–∫: <span id="current-stars">0</span>/3
        </div>
        
        <div id="quiz-container">
            <!-- –ü–∏—Ç–∞–Ω–Ω—è –±—É–¥—É—Ç—å –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>
        
        <div class="game-controls">
            <button class="btn-secondary" onclick="skipQuestion()">
                <i class="fas fa-forward"></i> –ü—Ä–æ–ø—É—Å—Ç–∏—Ç–∏
            </button>
            <button class="btn-primary" onclick="finishLevel()">
                <i class="fas fa-flag-checkered"></i> –ó–∞–≤–µ—Ä—à–∏—Ç–∏
            </button>
        </div>
    </main>
    
    <script src="../script.js"></script>
    <script>
        // –ü–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Ä—ñ–≤–Ω—è
        const questions = [
            {
                question: "–©–æ —Ç–∞–∫–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞?",
                options: [
                    "–í–æ–¥—è–Ω–∞ –æ–±–æ–ª–æ–Ω–∫–∞ –ó–µ–º–ª—ñ",
                    "–ü–æ–≤—ñ—Ç—Ä—è–Ω–∞ –æ–±–æ–ª–æ–Ω–∫–∞ –ó–µ–º–ª—ñ",
                    "–ö–∞–º'—è–Ω–∞ –æ–±–æ–ª–æ–Ω–∫–∞ –ó–µ–º–ª—ñ",
                    "–í–æ–≥–Ω–µ–Ω–∞ –æ–±–æ–ª–æ–Ω–∫–∞ –ó–µ–º–ª—ñ"
                ],
                correct: 1,
                points: 100
            },
            {
                question: "–Ø–∫–∏–π –ø—Ä–∏–ª–∞–¥ –≤–∏–º—ñ—Ä—é—î —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É?",
                options: [
                    "–ë–∞—Ä–æ–º–µ—Ç—Ä",
                    "–¢–µ—Ä–º–æ–º–µ—Ç—Ä",
                    "–ì—ñ–≥—Ä–æ–º–µ—Ç—Ä",
                    "–§–ª—é–≥–µ—Ä"
                ],
                correct: 1,
                points: 150
            },
            // –î–æ–¥–∞–π—Ç–µ —â–µ 8 –ø–∏—Ç–∞–Ω—å
        ];
        
        let currentQuestion = 0;
        let score = 0;
        let correctAnswers = 0;
        let timeLeft = 180; // 3 —Ö–≤–∏–ª–∏–Ω–∏
        
        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                finishLevel();
                return;
            }
            
            const q = questions[currentQuestion];
            const container = document.getElementById('quiz-container');
            
            container.innerHTML = `
                <div class="quiz-question">
                    <h2>–ü–∏—Ç–∞–Ω–Ω—è ${currentQuestion + 1} –∑ ${questions.length}</h2>
                    <p style="font-size: 20px; margin: 20px 0;">${q.question}</p>
                    
                    <div class="options-grid">
                        ${q.options.map((opt, index) => `
                            <button class="option-btn" onclick="checkAnswer(${index})">
                                ${String.fromCharCode(65 + index)}) ${opt}
                            </button>
                        `).join('')}
                    </div>
                    
                    <div class="question-points">
                        –ó–∞ —Ü–µ –ø–∏—Ç–∞–Ω–Ω—è: <strong>${q.points} –±–∞–ª—ñ–≤</strong>
                    </div>
                </div>
            `;
        }
        
        function checkAnswer(selectedIndex) {
            const q = questions[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            // –ë–ª–æ–∫—É—î–º–æ –≤—Å—ñ –∫–Ω–æ–ø–∫–∏
            buttons.forEach(btn => btn.disabled = true);
            
            // –ü–æ–∫–∞–∑—É—î–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
            buttons[q.correct].classList.add('correct');
            if (selectedIndex !== q.correct) {
                buttons[selectedIndex].classList.add('wrong');
            }
            
            // –î–æ–¥–∞—î–º–æ –±–∞–ª–∏
            if (selectedIndex === q.correct) {
                score += q.points;
                correctAnswers++;
                showMessage(`–ü—Ä–∞–≤–∏–ª—å–Ω–æ! +${q.points} –±–∞–ª—ñ–≤`, 'success');
            } else {
                showMessage(`–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: ${q.options[q.correct]}`, 'info');
            }
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            document.getElementById('current-score').textContent = score;
            
            // –ù–∞—Å—Ç—É–ø–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥–∏
            setTimeout(() => {
                currentQuestion++;
                loadQuestion();
            }, 2000);
        }
        
        function skipQuestion() {
            showMessage("–ü–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ–ø—É—â–µ–Ω–æ", 'info');
            currentQuestion++;
            loadQuestion();
        }
        
        function finishLevel() {
            // –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑—ñ—Ä–æ–∫
            const accuracy = correctAnswers / questions.length;
            let stars = 0;
            
            if (accuracy >= 0.9) stars = 3;
            else if (accuracy >= 0.7) stars = 2;
            else if (accuracy >= 0.5) stars = 1;
            
            // –í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è
            if (typeof completeLevel === 'function') {
                completeLevel(1, score, stars);
            } else {
                alert(`–†—ñ–≤–µ–Ω—å –∑–∞–≤–µ—Ä—à–µ–Ω–æ!\n–ë–∞–ª–∏: ${score}\n–ó—ñ—Ä–æ–∫: ${stars}/3`);
                window.location.href = '../game.html';
            }
        }
        
        // –¢–∞–π–º–µ—Ä
        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent = 
                `‚è±Ô∏è ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (timeLeft > 0) {
                timeLeft--;
                setTimeout(updateTimer, 1000);
            } else {
                finishLevel();
            }
        }
        
        // –ü–æ—á–∞—Ç–æ–∫ —Ä—ñ–≤–Ω—è
        window.onload = function() {
            loadQuestion();
            updateTimer();
        };
    </script>
</body>
</html>
