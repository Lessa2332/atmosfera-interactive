<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†—ñ–≤–µ–Ω—å 2: –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫</title>
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .game-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            text-align: center;
        }
        
        .game-title {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--accent-cyan);
        }
        
        .game-subtitle {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 30px;
        }
        
        .pressure-game {
            background: var(--glass-bg);
            border-radius: 25px;
            padding: 30px;
            border: 3px solid var(--accent-cyan);
            box-shadow: 0 10px 40px rgba(0, 255, 255, 0.2);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .balloon-container {
            height: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            margin-bottom: 30px;
        }
        
        .balloon {
            width: 120px;
            height: 150px;
            background: radial-gradient(circle at 30% 30%, #FF4081, #FF0066);
            border-radius: 50%;
            position: relative;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 
                inset -15px -15px 30px rgba(0, 0, 0, 0.3),
                0 10px 30px rgba(255, 64, 129, 0.4);
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .balloon-string {
            width: 2px;
            height: 120px;
            background: linear-gradient(to bottom, #666, #333);
            margin-top: -10px;
        }
        
        .balloon-basket {
            width: 60px;
            height: 30px;
            background: linear-gradient(45deg, #8B4513, #A0522D);
            border-radius: 5px;
            margin-top: -5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .pressure-display {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin: 20px auto;
            max-width: 300px;
            border: 2px solid var(--accent-cyan);
        }
        
        .pressure-value {
            font-size: 48px;
            font-weight: 900;
            color: var(--accent-cyan);
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }
        
        .pressure-label {
            font-size: 14px;
            opacity: 0.8;
        }
        
        .progress-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            height: 30px;
            margin: 25px 0;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #00FFFF, #0099FF);
            transition: width 0.3s ease;
            position: relative;
        }
        
        .progress-text {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: white;
            font-size: 14px;
        }
        
        .pump-btn {
            background: linear-gradient(45deg, #00FFFF, #0099FF);
            border: none;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            font-size: 20px;
            font-weight: 900;
            color: black;
            cursor: pointer;
            transition: all 0.2s;
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 10px 30px rgba(0, 255, 255, 0.4),
                inset 0 5px 15px rgba(255, 255, 255, 0.3);
        }
        
        .pump-btn:hover {
            transform: scale(1.05);
            box-shadow: 
                0 15px 40px rgba(0, 255, 255, 0.6),
                inset 0 5px 15px rgba(255, 255, 255, 0.4);
        }
        
        .pump-btn:active {
            transform: scale(0.95);
            box-shadow: 
                0 5px 20px rgba(0, 255, 255, 0.3),
                inset 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .pump-btn i {
            font-size: 40px;
            margin-bottom: 10px;
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid var(--accent-cyan);
        }
        
        .instructions h3 {
            color: var(--accent-cyan);
            margin-bottom: 10px;
        }
        
        .instructions p {
            margin-bottom: 10px;
            font-size: 14px;
            opacity: 0.9;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            border: 1px solid var(--glass-border);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 900;
            color: var(--accent-lime);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }
        
        .result-screen {
            text-align: center;
            padding: 40px;
            display: none;
        }
        
        .result-emoji {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }
        
        .result-score {
            font-size: 48px;
            font-weight: 900;
            color: var(--accent-cyan);
            margin: 20px 0;
        }
        
        .stars {
            font-size: 36px;
            color: gold;
            margin: 20px 0;
        }
        
        .completion-message {
            font-size: 18px;
            margin: 20px 0;
            opacity: 0.9;
        }
        
        /* –ê–Ω—ñ–º–∞—Ü—ñ—ó –¥–ª—è –Ω–∞–¥—É–≤–∞–Ω–Ω—è */
        @keyframes balloonGrow {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes pump {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <header class="game-header">
        <div class="header-left">
            <a href="../game.html" class="back-btn">
                <i class="fas fa-arrow-left"></i>
            </a>
            <div class="player-info">
                <div class="username">üìâ –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫</div>
                <div class="player-class">–†—ñ–≤–µ–Ω—å 2</div>
            </div>
        </div>
        <div class="stats">
            <div class="stat-item">
                <i class="fas fa-clock"></i>
                <span id="timer-display">01:30</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-tachometer-alt"></i>
                <span id="pressure-display">760 –º–º —Ä—Ç.—Å—Ç.</span>
            </div>
        </div>
    </header>
    
    <main class="game-container">
        <h1 class="game-title">ü™ê –ó–∞–≤–¥–∞–Ω–Ω—è: –ù–∞–¥—É–π –ø–æ–≤—ñ—Ç—Ä—è–Ω—É –∫—É–ª—é!</h1>
        <p class="game-subtitle">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —Ç–∏—Å–∫, —â–æ–± –ø—ñ–¥–Ω—è—Ç–∏ –∫—É–ª—é —è–∫–Ω–∞–π–≤–∏—â–µ!</p>
        
        <div class="pressure-game">
            <!-- –Ü–≥—Ä–æ–≤–∞ –∑–æ–Ω–∞ -->
            <div class="balloon-container">
                <div class="balloon" id="balloon" style="transform: scale(1);"></div>
                <div class="balloon-string"></div>
                <div class="balloon-basket" id="balloon-height">0 –º</div>
            </div>
            
            <!-- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∏—Å–∫—É -->
            <div class="pressure-display">
                <div class="pressure-label">–ê–¢–ú–û–°–§–ï–†–ù–ò–ô –¢–ò–°–ö</div>
                <div class="pressure-value" id="pressure-value">760</div>
                <div class="pressure-label">–º–º —Ä—Ç. —Å—Ç.</div>
            </div>
            
            <!-- –ü—Ä–æ–≥—Ä–µ—Å -->
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%;">
                    <div class="progress-text" id="progress-text">0%</div>
                </div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∫–∞—á—É–≤–∞–Ω–Ω—è -->
            <button class="pump-btn" id="pump-btn" onclick="pumpBalloon()">
                <i class="fas fa-wind"></i>
                –ù–∞–∫–∞—á–∞—Ç–∏!
            </button>
            
            <!-- –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó -->
            <div class="instructions">
                <h3><i class="fas fa-info-circle"></i> –Ø–∫ –≥—Ä–∞—Ç–∏:</h3>
                <p>1. –ù–∞—Ç–∏—Å–∫–∞–π –∫–Ω–æ–ø–∫—É "–ù–∞–∫–∞—á–∞—Ç–∏", —â–æ–± –∑–±—ñ–ª—å—à–∏—Ç–∏ —Ç–∏—Å–∫</p>
                <p>2. –ö–æ–∂–Ω–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –¥–æ–¥–∞—î —Ç–∏—Å–∫ —ñ –ø—ñ–¥–Ω—ñ–º–∞—î –∫—É–ª—é</p>
                <p>3. –î—ñ–π—Å–∏ –¥–æ –≤–∏—Å–æ—Ç–∏ <strong>1000 –º–µ—Ç—Ä—ñ–≤</strong> –∑–∞ 90 —Å–µ–∫—É–Ω–¥!</p>
                <p><strong>–¶—ñ–ª—å: 760 ‚Üí 660 –º–º —Ä—Ç.—Å—Ç. (—Å–ø–∞–¥ —Ç–∏—Å–∫—É –∑ –≤–∏—Å–æ—Ç–æ—é)</strong></p>
            </div>
            
            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="pumps-count">0</div>
                    <div class="stat-label">–ù–ê–ö–ê–ß–£–í–ê–ù–¨</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="current-height">0 –º</div>
                    <div class="stat-label">–í–ò–°–û–¢–ê</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="time-left">90 —Å</div>
                    <div class="stat-label">–ß–ê–°–£</div>
                </div>
            </div>
        </div>
        
        <!-- –ï–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ -->
        <div id="result-screen" class="result-screen">
            <div class="result-emoji" id="result-emoji">üéà</div>
            <h2 id="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç!</h2>
            
            <div class="completion-message" id="completion-message">
                –¢–∏ –ø—ñ–¥–Ω—è–≤ –∫—É–ª—é –Ω–∞ <span id="final-height">0</span> –º–µ—Ç—Ä—ñ–≤!
            </div>
            
            <div class="result-score" id="final-score">0 –±–∞–ª—ñ–≤</div>
            
            <div class="stars" id="stars-display">‚òÜ‚òÜ‚òÜ</div>
            
            <div class="completion-message">
                –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫ –∑–Ω–∏–∂—É—î—Ç—å—Å—è –∑ –≤–∏—Å–æ—Ç–æ—é:<br>
                <strong>100 –º ‚âà 10 –º–º —Ä—Ç.—Å—Ç.</strong>
            </div>
            
            <div style="margin-top: 40px;">
                <button class="btn-primary" onclick="finishLevel()" style="padding: 15px 40px; font-size: 20px;">
                    <i class="fas fa-trophy"></i> –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ä—ñ–≤–µ–Ω—å
                </button>
            </div>
        </div>
    </main>
    
    <script>
        // ============ –ó–ú–Ü–ù–ù–Ü –ì–†–ò ============
        let pressure = 760; // –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Ç–∏—Å–∫ (–Ω–æ—Ä–º–∞–ª—å–Ω–∏–π)
        let height = 0;     // –í–∏—Å–æ—Ç–∞ –≤ –º–µ—Ç—Ä–∞—Ö
        let pumps = 0;      // –ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞–∫–∞—á—É–≤–∞–Ω—å
        let progress = 0;   // –ü—Ä–æ–≥—Ä–µ—Å (0-100%)
        let timeLeft = 90;  // –ß–∞—Å —É —Å–µ–∫—É–Ω–¥–∞—Ö
        let timerInterval;
        let gameCompleted = false;
        
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –≥—Ä–∏
        const TARGET_HEIGHT = 1000; // –¶—ñ–ª—å–æ–≤–∞ –≤–∏—Å–æ—Ç–∞ (–º–µ—Ç—Ä–∏)
        const TARGET_PRESSURE = 660; // –¢–∏—Å–∫ –Ω–∞ 1000 –º–µ—Ç—Ä—ñ–≤
        const PRESSURE_DROP_PER_METER = 0.1; // –ü–∞–¥—ñ–Ω–Ω—è —Ç–∏—Å–∫—É –Ω–∞ 1 –º–µ—Ç—Ä
        const PUMP_FORCE = 15; // –°–∏–ª–∞ –æ–¥–Ω–æ–≥–æ –Ω–∞–∫–∞—á—É–≤–∞–Ω–Ω—è
        
        // ============ –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ============
        function initGame() {
            updateDisplay();
            startTimer();
            
            // –î–æ–¥–∞—î–º–æ –∑–≤—É–∫–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏ (–æ–ø—Ü—ñ–π–Ω–æ)
            // loadSounds();
        }
        
        // ============ –¢–ê–ô–ú–ï–† ============
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimeDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (!gameCompleted) {
                        finishGame();
                    }
                }
            }, 1000);
        }
        
        // ============ –ù–ê–ö–ê–ß–£–í–ê–ù–ù–Ø –ö–£–õ–Ü ============
        function pumpBalloon() {
            if (gameCompleted) return;
            
            // –ó–±—ñ–ª—å—à—É—î–º–æ —Ç–∏—Å–∫ —Ç–∞ –≤–∏—Å–æ—Ç—É
            pressure -= PUMP_FORCE * 0.01; // –¢–∏—Å–∫ –∑–Ω–∏–∂—É—î—Ç—å—Å—è
            height += PUMP_FORCE; // –í–∏—Å–æ—Ç–∞ –∑—Ä–æ—Å—Ç–∞—î
            pumps++;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å
            progress = Math.min((height / TARGET_HEIGHT) * 100, 100);
            
            // –ê–Ω—ñ–º–∞—Ü—ñ—è –Ω–∞–∫–∞—á—É–≤–∞–Ω–Ω—è
            animatePump();
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
            updateDisplay();
            
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è
            if (height >= TARGET_HEIGHT && !gameCompleted) {
                gameCompleted = true;
                clearInterval(timerInterval);
                setTimeout(finishGame, 500);
            }
        }
        
        // ============ –ê–ù–Ü–ú–ê–¶–Ü–Ø –ù–ê–ö–ê–ß–£–í–ê–ù–ù–Ø ============
        function animatePump() {
            const balloon = document.getElementById('balloon');
            const pumpBtn = document.getElementById('pump-btn');
            
            // –ê–Ω—ñ–º–∞—Ü—ñ—è –∫–Ω–æ–ø–∫–∏
            pumpBtn.style.animation = 'pump 0.3s';
            setTimeout(() => {
                pumpBtn.style.animation = '';
            }, 300);
            
            // –ê–Ω—ñ–º–∞—Ü—ñ—è –∫—É–ª—ñ
            const scale = 1 + (height / TARGET_HEIGHT) * 0.5;
            balloon.style.transform = `scale(${scale})`;
            balloon.style.animation = 'balloonGrow 0.5s';
            
            // –ï—Ñ–µ–∫—Ç —á–∞—Å—Ç–∏–Ω–æ–∫ (–æ–ø—Ü—ñ–π–Ω–æ)
            createParticle();
        }
        
        // ============ –ï–§–ï–ö–¢ –ß–ê–°–¢–ò–ù–û–ö ============
        function createParticle() {
            const balloon = document.getElementById('balloon');
            const rect = balloon.getBoundingClientRect();
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ —á–∞—Å—Ç–∏–Ω–∫—É
            const particle = document.createElement('div');
            particle.style.cssText = `
                position: fixed;
                width: 10px;
                height: 10px;
                background: radial-gradient(circle, #00FFFF, #0099FF);
                border-radius: 50%;
                pointer-events: none;
                z-index: 1000;
                top: ${rect.top + 50}px;
                left: ${rect.left + 60}px;
                opacity: 0.8;
                animation: particleFloat 1s ease-out forwards;
            `;
            
            document.body.appendChild(particle);
            
            // –í–∏–¥–∞–ª—è—î–º–æ —á–∞—Å—Ç–∏–Ω–∫—É –ø—ñ—Å–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
            setTimeout(() => {
                particle.remove();
            }, 1000);
            
            // –î–æ–¥–∞—î–º–æ —Å—Ç–∏–ª—å –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó
            if (!document.getElementById('particle-style')) {
                const style = document.createElement('style');
                style.id = 'particle-style';
                style.textContent = `
                    @keyframes particleFloat {
                        0% {
                            transform: translate(0, 0) scale(1);
                            opacity: 0.8;
                        }
                        100% {
                            transform: translate(${Math.random() * 40 - 20}px, -100px) scale(0);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
        }
        
        // ============ –û–ù–û–í–õ–ï–ù–ù–Ø –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø ============
        function updateDisplay() {
            // –¢–∏—Å–∫
            document.getElementById('pressure-value').textContent = 
                Math.max(Math.round(pressure), TARGET_PRESSURE);
            document.getElementById('pressure-display').textContent = 
                `${Math.round(pressure)} –º–º —Ä—Ç.—Å—Ç.`;
            
            // –í–∏—Å–æ—Ç–∞
            document.getElementById('balloon-height').textContent = 
                `${Math.round(height)} –º`;
            document.getElementById('current-height').textContent = 
                `${Math.round(height)} –º`;
            
            // –ü—Ä–æ–≥—Ä–µ—Å
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = 
                `${Math.round(progress)}%`;
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            document.getElementById('pumps-count').textContent = pumps;
            
            // –ß–∞—Å
            updateTimeDisplay();
        }
        
        function updateTimeDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer-display').textContent = 
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('time-left').textContent = 
                `${timeLeft} —Å`;
        }
        
        // ============ –ó–ê–í–ï–†–®–ï–ù–ù–Ø –ì–†–ò ============
        function finishGame() {
            gameCompleted = true;
            clearInterval(timerInterval);
            
            // –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —ñ–≥—Ä–æ–≤—É –∑–æ–Ω—É
            document.querySelector('.pressure-game').style.display = 'none';
            
            // –ü–æ–∫–∞–∑—É—î–º–æ –µ–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
            const resultScreen = document.getElementById('result-screen');
            resultScreen.style.display = 'block';
            
            // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –±–∞–ª–∏
            let score = 0;
            let stars = 0;
            let emoji = 'üò¢';
            let title = '–ú–æ–∂–Ω–∞ –∫—Ä–∞—â–µ!';
            let message = '';
            
            // –ë–∞–ª–∏ –∑–∞ –≤–∏—Å–æ—Ç—É
            const heightScore = Math.min(Math.round(height / 10), 12);
            score = heightScore;
            
            // –ë–æ–Ω—É—Å –∑–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å
            if (timeLeft > 45 && height >= TARGET_HEIGHT) {
                score += 3; // –ë–æ–Ω—É—Å –∑–∞ —à–≤–∏–¥–∫–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
            }
            
            // –ë–æ–Ω—É—Å –∑–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
            if (pumps <= 30 && height >= TARGET_HEIGHT) {
                score += 2; // –ë–æ–Ω—É—Å –∑–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –Ω–∞–∫–∞—á—É–≤–∞–Ω–Ω—è
            }
            
            // –í–∏–∑–Ω–∞—á–∞—î–º–æ –∑—ñ—Ä–∫–∏
            if (height >= TARGET_HEIGHT) {
                if (timeLeft >= 60) {
                    stars = 3;
                    emoji = 'üèÜ';
                    title = '–í—ñ–¥–º—ñ–Ω–Ω–æ!';
                    message = '–¢–∏ –º–∞–π—Å—Ç–µ—Ä –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–≥–æ —Ç–∏—Å–∫—É!';
                } else if (timeLeft >= 30) {
                    stars = 2;
                    emoji = 'üéâ';
                    title = '–î–æ–±—Ä–µ!';
                    message = '–ß—É–¥–æ–≤–æ –≤–ø–æ—Ä–∞–≤—Å—è!';
                } else {
                    stars = 1;
                    emoji = 'üëç';
                    title = '–ù–µ–ø–æ–≥–∞–Ω–æ!';
                    message = '–¢–∏ –¥–æ—Å—è–≥ —Ü—ñ–ª—ñ!';
                }
            } else {
                stars = 0;
                emoji = 'üéà';
                title = '–°–ø—Ä–æ–±—É–π —â–µ!';
                message = '–¢–∏ –º–∞–π–∂–µ –¥–æ—Å—è–≥ —Ü—ñ–ª—ñ!';
            }
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –µ–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
            document.getElementById('result-emoji').textContent = emoji;
            document.getElementById('result-title').textContent = title;
            document.getElementById('completion-message').innerHTML = 
                `–¢–∏ –ø—ñ–¥–Ω—è–≤ –∫—É–ª—é –Ω–∞ <span id="final-height">${Math.round(height)}</span> –º–µ—Ç—Ä—ñ–≤!<br>${message}`;
            document.getElementById('final-score').textContent = `${score} –±–∞–ª—ñ–≤`;
            
            // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ –∑—ñ—Ä–∫–∏
            let starsHTML = '';
            for (let i = 0; i < 3; i++) {
                starsHTML += i < stars ? '‚òÖ' : '‚òÜ';
            }
            document.getElementById('stars-display').innerHTML = starsHTML;
            
            // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
            saveResults(score, stars);
        }
        
        // ============ –ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø –†–ï–ó–£–õ–¨–¢–ê–¢–Ü–í ============
        function saveResults(score, stars) {
            localStorage.setItem('level2_score', score);
            localStorage.setItem('level2_stars', stars);
            localStorage.setItem('level2_completed', 'true');
            
            console.log(`–†—ñ–≤–µ–Ω—å 2 –∑–∞–≤–µ—Ä—à–µ–Ω–æ: ${score} –±–∞–ª—ñ–≤, ${stars} –∑—ñ—Ä–æ–∫`);
        }
        
        // ============ –ó–ê–í–ï–†–®–ï–ù–ù–Ø –†–Ü–í–ù–Ø ============
        function finishLevel() {
            const score = parseInt(localStorage.getItem('level2_score')) || 0;
            const stars = parseInt(localStorage.getItem('level2_stars')) || 0;
            
            window.location.href = `../game.html?level=2&score=${score}&stars=${stars}`;
        }
        
        // ============ –ó–ê–ü–£–°–ö –ì–†–ò ============
        document.addEventListener('DOMContentLoaded', initGame);
        
        // –î–æ–¥–∞—î–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –Ω–∞—Ç–∏—Å–∫–∞—Ç–∏ –ø—Ä–æ–±—ñ–ª –¥–ª—è –Ω–∞–∫–∞—á—É–≤–∞–Ω–Ω—è
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && !gameCompleted) {
                e.preventDefault();
                pumpBalloon();
            }
        });
        
        // –î–æ–¥–∞—î–º–æ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ç–∞–ø—É –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
        document.getElementById('pump-btn').addEventListener('touchstart', (e) => {
            e.preventDefault();
            pumpBalloon();
        });
    </script>
</body>
</html>
