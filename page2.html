<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫ ‚Äî –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –¥–ª—è 6 –∫–ª–∞—Å—É</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #0F172A;
            --secondary: #1E293B;
            --accent-cyan: #00FFFF;
            --accent-orange: #FF9500;
            --accent-lime: #39FF14;
            --accent-purple: #C77DFF;
            --text-light: #E2E8F0;
            --glass-bg: rgba(30, 41, 59, 0.6);
            --glass-border: rgba(255, 255, 255, 0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Nunito', sans-serif; }
        body {
            background: var(--primary);
            color: var(--text-light);
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .lesson-card {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            border-radius: 32px;
            padding: 30px;
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            margin-bottom: 25px;
        }
        h1 {
            font-size: 42px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 20px var(--accent-orange);
        }
        .subtitle { font-size: 22px; text-align: center; opacity: 0.9; margin-bottom: 40px; }
        .btn-primary {
            padding: 12px 28px;
            background: linear-gradient(45deg, var(--accent-orange), #FFB800);
            color: #000;
            font-weight: 900;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 20px var(--accent-orange);
            transition: all 0.3s;
            font-size: 18px;
        }
        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px var(--accent-orange);
        }
        .btn-secondary {
            padding: 12px 28px;
            background: linear-gradient(45deg, var(--accent-cyan), #0099FF);
            color: #000;
            font-weight: 900;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 0 20px var(--accent-cyan);
            transition: all 0.3s;
            font-size: 18px;
        }
        .btn-secondary:hover {
            transform: scale(1.05);
            box-shadow: 0 0 40px var(--accent-cyan);
        }
        .map-container {
            width: 100%;
            height: 500px;
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid var(--accent-cyan);
            margin: 20px 0;
        }
        iframe { width: 100%; height: 100%; border: none; }
        .animation-scene {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #87CEEB, #E0F7FA);
            border-radius: 15px;
            margin: 20px 0;
            overflow: hidden;
            border: 2px solid var(--accent-orange);
        }
        .ball {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            bottom: 50px;
            transition: all 0.5s ease;
        }
        .ball.with-air { background: radial-gradient(circle, #FFD700, #FF8C00); left: 20%; }
        .ball.no-air { background: #888; left: 70%; transform: scale(0.7); }
        .mercury-tube {
            position: absolute;
            right: 20%;
            bottom: 50px;
            width: 12px;
            height: 220px;
            background: rgba(255,255,255,0.2);
            border: 2px solid var(--accent-cyan);
        }
        .mercury {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(to top, #EF5350, #2196F3);
            height: 76%;
            transition: height 1s ease;
        }
        .mountain {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 220px;
            height: 220px;
            background: linear-gradient(to top, #5D4037, #8BC34A);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }
        .pressure-label {
            position: absolute;
            font-weight: bold;
            color: white;
            background: rgba(0,0,0,0.6);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 16px;
        }
        .pressure-base { bottom: 20px; left: 40%; }
        .pressure-top { top: 20px; left: 50%; }
        .input-group {
            margin: 20px 0;
        }
        input {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--accent-cyan);
            color: white;
            font-size: 18px;
            margin: 10px 0;
        }
        .reward-badge {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, gold, orange);
            padding: 30px;
            border-radius: 20px;
            z-index: 1000;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
            display: none;
            text-align: center;
            max-width: 400px;
            color: black;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="lesson-card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <a href="index.html" class="btn-secondary">
                <i class="fas fa-home"></i> –ì–æ–ª–æ–≤–Ω–∞
            </a>
            <div style="font-size: 18px; font-weight: bold;">
                <i class="fas fa-gem"></i> <span id="totalPoints">0</span> –±–∞–ª—ñ–≤
            </div>
        </div>

        <h1>üìä –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫</h1>
        <p class="subtitle">–ß–æ–º—É –ø–æ–≤—ñ—Ç—Ä—è —Ç–∏—Å–Ω–µ? –Ø–∫ —Ü–µ –≤–∏–º—ñ—Ä—é—é—Ç—å? –î–æ—Å–ª—ñ–¥–∂—É–π!</p>

        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ê–Ω—ñ–º–∞—Ü—ñ—è -->
        <div class="lesson-card">
            <h2 style="color: var(--accent-orange);">
                <i class="fas fa-film"></i> –ó–∞–≤–¥–∞–Ω–Ω—è 1: –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π –∑–∞ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
            </h2>
            <p>–ü–µ—Ä–µ–≥–ª—è–Ω—å, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:</p>
            <ul style="margin: 15px 0; padding-left: 25px;">
                <li>–ö—É–ª—å–∫–∞ –∑ –ø–æ–≤—ñ—Ç—Ä—è–º vs –±–µ–∑ –ø–æ–≤—ñ—Ç—Ä—è</li>
                <li>–î–æ—Å–ª—ñ–¥ –¢–æ—Ä—Ä—ñ—á–µ–ª–ª—ñ (—Ä—Ç—É—Ç–Ω–∞ —Ç—Ä—É–±–∫–∞)</li>
                <li>–ó–º—ñ–Ω–∞ —Ç–∏—Å–∫—É –Ω–∞ –≥–æ—Ä—ñ (–±—ñ–ª—è –ø—ñ–¥–Ω—ñ–∂–∂—è —ñ –Ω–∞ –≤–µ—Ä—à–∏–Ω—ñ)</li>
            </ul>
            
            <div class="animation-scene">
                <div class="ball with-air" title="–ö—É–ª—å–∫–∞ –∑ –ø–æ–≤—ñ—Ç—Ä—è–º"></div>
                <div class="ball no-air" title="–ö—É–ª—å–∫–∞ –±–µ–∑ –ø–æ–≤—ñ—Ç—Ä—è"></div>
                <div class="mercury-tube">
                    <div class="mercury"></div>
                </div>
                <div class="mountain"></div>
                <div class="pressure-label pressure-base">1013 –≥–ü–∞</div>
                <div class="pressure-label pressure-top">700 –≥–ü–∞</div>
            </div>
            
            <p style="margin-top: 15px; color: var(--accent-lime);">
                üí° –ü–æ–≤—ñ—Ç—Ä—è –º–∞—î –º–∞—Å—É! –ß–∏–º –±—ñ–ª—å—à–µ –ø–æ–≤—ñ—Ç—Ä—è –Ω–∞–¥ –Ω–∞–º–∏ ‚Äî —Ç–∏–º –±—ñ–ª—å—à–∏–π —Ç–∏—Å–∫.
            </p>
            <p id="task1Status" style="margin-top:10px; color:var(--accent-lime);"></p>
        </div>

        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 2: –ö–∞—Ä—Ç–∞ -->
        <div class="lesson-card">
            <h2 style="color: var(--accent-cyan);">
                <i class="fas fa-map-marked-alt"></i> –ó–∞–≤–¥–∞–Ω–Ω—è 2: –†–æ–±–æ—Ç–∞ –∑ –∫–∞—Ä—Ç–æ—é
            </h2>
            <p>1Ô∏è‚É£ –í—ñ–¥–∫—Ä–∏–π –∫–∞—Ä—Ç—É<br>
               2Ô∏è‚É£ –£–≤—ñ–º–∫–Ω–∏ —à–∞—Ä <strong>Pressure (–¢–∏—Å–∫)</strong><br>
               3Ô∏è‚É£ –ù–∞—Ç–∏—Å–Ω–∏ üîç —ñ –≤–≤–µ–¥–∏ –º—ñ—Å—Ç–æ: <strong>–ß–æ—Ä–Ω–æ–º–æ—Ä—Å—å–∫</strong> –∞–±–æ <strong>–Ü–ª–ª—ñ—á—ñ–≤—Å—å–∫</strong><br>
               4Ô∏è‚É£ –ó–∞–ø–∏—à–∏ —Ç–∏—Å–∫ —Ç–∞ –∫–æ–ª—ñ—Ä</p>
            
            <div class="map-container">
                <iframe src="https://www.ventusky.com/?layer=pressure&metric=pressure"></iframe>
            </div>
            
            <div class="input-group">
                <label>–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫ (—á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: 1015):</label>
                <input type="text" id="pressureValue" placeholder="–í–≤–µ–¥–∏ —á–∏—Å–ª–æ –∑ –∫–∞—Ä—Ç–∏">
                <label>–ö–æ–ª—ñ—Ä –Ω–∞ –∫–∞—Ä—Ç—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: —Å–∏–Ω—ñ–π, —á–µ—Ä–≤–æ–Ω–∏–π):</label>
                <input type="text" id="pressureColor" placeholder="–û–ø–∏—à–∏ –∫–æ–ª—ñ—Ä">
            </div>
            
            <button class="btn-primary" onclick="submitMapTask()">
                <i class="fas fa-check"></i> –ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            </button>
            <p id="task2Status" style="margin-top:10px; color:var(--accent-lime);"></p>
        </div>

        <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 3: –ó–∞–∫—ñ–Ω—á–∏ —Ä–µ—á–µ–Ω–Ω—è -->
        <div class="lesson-card">
            <h2 style="color: var(--accent-purple);">
                <i class="fas fa-pencil-alt"></i> –ó–∞–≤–¥–∞–Ω–Ω—è 3: –ó–∞–∫—ñ–Ω—á–∏ —Ä–µ—á–µ–Ω–Ω—è
            </h2>
            <p>–ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∏–π —Ç–∏—Å–∫ ‚Äî —Ü–µ 
                <input type="text" id="sentence1" placeholder="..." style="width: 300px; display: inline-block; margin: 0 5px;">
                , —ñ –∑ –ø—ñ–¥–Ω—è—Ç—Ç—è–º —É–≥–æ—Ä—É –≤—ñ–Ω 
                <input type="text" id="sentence2" placeholder="..." style="width: 150px; display: inline-block; margin: 0 5px;">.
            </p>
            <button class="btn-primary" onclick="checkSentence()" style="margin-top:15px;">
                <i class="fas fa-check-double"></i> –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
            </button>
            <p id="task3Status" style="margin-top:10px; color:var(--accent-lime);"></p>
        </div>

        <!-- –ù–∞–≥–æ—Ä–æ–¥–∞ -->
        <div class="reward-badge" id="rewardBadge">
            <h2>üèÜ –í—ñ—Ç–∞—î–º–æ!</h2>
            <p>–¢–∏ –æ—Ç—Ä–∏–º–∞–≤ <span id="earnedPoints">12</span> –±–∞–ª—ñ–≤!</p>
            <p>–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ.</p>
            <a href="page3.html" class="btn-primary" style="margin-top:15px; display:inline-block;">–î–∞–ª—ñ ‚Üí –í—ñ—Ç–µ—Ä</a>
        </div>
    </div>
</div>

<script>
// === –í–ê–ñ–õ–ò–í–û: —Ç–µ–º–∞ = '–¢–∏—Å–∫' (–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∫–æ–ª–æ–Ω—Ü—ñ D —É —Ç–∞–±–ª–∏—Ü—ñ) ===
const SHEET_URL = 'https://script.google.com/macros/s/AKfycbx1ok9gz_71vNK7NyDXlGrhkw4QcaDwBsggtJ_7eqE_XRZw_9PLiqPFn-SnpWx9yh3kFA/exec';
let userData = {};
let taskPoints = { task1: 0, task2: 0, task3: 0 };

document.addEventListener('DOMContentLoaded', () => {
    loadUserData();
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–∞—î–º–æ –±–∞–ª–∏ –∑–∞ –ø–µ—Ä–µ–≥–ª—è–¥ –∞–Ω—ñ–º–∞—Ü—ñ—ó
    if (taskPoints.task1 === 0) {
        awardPoints('task1', 4);
        document.getElementById('task1Status').textContent = '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (+4 –±–∞–ª–∏)';
    }
    loadProgress();
});

function loadUserData() {
    const saved = localStorage.getItem('atmosphereUser');
    if (!saved) return window.location.href = 'index.html';
    userData = JSON.parse(saved);
    updatePointsDisplay();
}

function updatePointsDisplay() {
    const total = Object.values(taskPoints).reduce((a, b) => a + b, 0);
    document.getElementById('totalPoints').textContent = total;
}

function loadProgress() {
    const progress = JSON.parse(localStorage.getItem('pressureProgress') || '{}');
    taskPoints = { ...taskPoints, ...progress };
    if (taskPoints.task1 > 0) document.getElementById('task1Status').textContent = '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (+4 –±–∞–ª–∏)';
    if (taskPoints.task2 > 0) document.getElementById('task2Status').textContent = '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (+4 –±–∞–ª–∏)';
    if (taskPoints.task3 > 0) document.getElementById('task3Status').textContent = '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (+4 –±–∞–ª–∏)';
}

async function awardPoints(taskName, points) {
    if (taskPoints[taskName] >= points) return;
    taskPoints[taskName] = points;
    localStorage.setItem('pressureProgress', JSON.stringify(taskPoints));
    
    try {
        await fetch(SHEET_URL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                name: userData.name,
                class: userData.class,
                theme: '–¢–∏—Å–∫', // ‚Üê –ö–õ–Æ–ß–û–í–ï: –º–∞—î –∑–±—ñ–≥–∞—Ç–∏—Å—è –∑ –Ω–∞–∑–≤–æ—é –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ!
                points: points
            })
        });
    } catch (e) {
        console.warn('–ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –±–∞–ª–∏:', e);
    }
    
    updatePointsDisplay();
    if (Object.values(taskPoints).every(p => p > 0)) {
        showReward(12);
    }
}

// –ó–∞–≤–¥–∞–Ω–Ω—è 2: –ö–∞—Ä—Ç–∞
function submitMapTask() {
    const value = document.getElementById('pressureValue').value.trim();
    const color = document.getElementById('pressureColor').value.trim();
    if (!value || !color) {
        alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω–∏ –æ–±–∏–¥–≤–∞ –ø–æ–ª—è!');
        return;
    }
    if (taskPoints.task2 === 0) {
        awardPoints('task2', 4);
        document.getElementById('task2Status').textContent = '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (+4 –±–∞–ª–∏)';
    }
}

// –ó–∞–≤–¥–∞–Ω–Ω—è 3: –†–µ—á–µ–Ω–Ω—è
function checkSentence() {
    const part1 = document.getElementById('sentence1').value.trim().toLowerCase();
    const part2 = document.getElementById('sentence2').value.trim().toLowerCase();
    
    // –ü—Ä–∏–π–º–∞—î–º–æ —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è
    const isCorrect1 = part1.includes('—Ç–∏—Å–∫') && (part1.includes('–ø–æ–≤—ñ—Ç—Ä—è') || part1.includes('–∞—Ç–º–æ—Å—Ñ–µ—Ä–∏'));
    const isCorrect2 = ['–∑–º–µ–Ω—à—É—î—Ç—å—Å—è', '–ø–∞–¥–∞—î', '—Å—Ç–∞—î –º–µ–Ω—à–∏–º', '–Ω–∏–∂—á–∏–π'].some(word => part2.includes(word));
    
    if (isCorrect1 && isCorrect2) {
        if (taskPoints.task3 === 0) {
            awardPoints('task3', 4);
            document.getElementById('task3Status').textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! (+4 –±–∞–ª–∏)';
        }
    } else {
        alert('–°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑!\n–ü—ñ–¥–∫–∞–∑–∫–∞:\n‚Ä¢ –ü–æ—á–Ω–∏ –∑ "—Ç–∏—Å–∫ –ø–æ–≤—ñ—Ç—Ä—è..."\n‚Ä¢ –î—Ä—É–≥–∞ —á–∞—Å—Ç–∏–Ω–∞: "–∑–º–µ–Ω—à—É—î—Ç—å—Å—è"');
    }
}

function showReward(points) {
    document.getElementById('earnedPoints').textContent = points;
    document.getElementById('rewardBadge').style.display = 'block';
}
</script>
</body>
</html>
