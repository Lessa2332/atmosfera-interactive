<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è ‚Äî 12 –±–∞–ª—ñ–≤ –ù–£–®</title>

<style>
:root{
  --bg:#0f172a; --card:#0b1220; --accent:#22d3ee; --ok:#22c55e; --warn:#f59e0b;
  --text:#e5e7eb; --muted:#94a3b8; --line:#1f2937;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  color:var(--text); background:radial-gradient(1200px 600px at 20% -10%, #1f2937, transparent),
  linear-gradient(180deg,#020617,#020617);
}
.container{max-width:1200px;margin:auto;padding:16px}
h1,h2{margin:.4em 0;text-align:center}
.card{
  background:linear-gradient(180deg,#0b1220,#050b18);
  border:1px solid var(--line); border-radius:20px; padding:clamp(14px,3vw,24px);
  box-shadow:0 10px 30px rgba(0,0,0,.35); margin:16px 0;
}
.btn{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:12px 18px; border-radius:999px; border:0; cursor:pointer;
  color:#001018; background:linear-gradient(90deg,#22d3ee,#60a5fa);
  font-weight:700;
}
.btn.secondary{background:#0b1220;color:var(--text);border:1px solid var(--line)}
.center{text-align:center}
.grid{display:grid;gap:16px}
@media(min-width:900px){.grid.two{grid-template-columns:1.1fr .9fr}}

/* Scene */
.scene{position:relative;height:clamp(220px,40vw,360px);border-radius:16px;
  background:linear-gradient(#7dd3fc 60%, #22c55e 40%); overflow:hidden}
.sun{position:absolute;width:clamp(44px,8vw,76px);height:clamp(44px,8vw,76px);
  border-radius:50%; background:radial-gradient(circle at 30% 30%,#fff7ae,#f59e0b);
  box-shadow:0 0 40px #f59e0b; cursor:grab}
.thermo{position:absolute;right:12px;bottom:12px;width:28px;height:200px;border-radius:16px;
  border:2px solid #334155;background:#020617;overflow:hidden}
.mercury{position:absolute;bottom:0;width:100%;height:40%;background:linear-gradient(#ef4444,#22d3ee);transition:.4s}

/* Controls */
.select, .range{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);
  background:#020617;color:var(--text)}
.read{font-weight:700;text-align:center}

/* Quiz */
.quiz label{display:block;margin:8px 0}

/* Leaderboard */
.lb-wrap{border:2px solid #22c55e;border-radius:24px;padding:16px}
.lb-head{display:flex;flex-direction:column;align-items:center;gap:10px}
.lb-title{font-size:1.1rem;font-weight:800}
.table{width:100%;border-collapse:collapse;margin-top:12px}
.table th,.table td{padding:10px;border-bottom:1px solid var(--line);text-align:center}
.table th{color:var(--muted)}
.score{font-size:1.2rem;font-weight:800}
.badge{color:#22c55e;font-weight:800}
</style>
</head>

<body>
<div class="container">
  <h1>üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è ‚Äî 12 –±–∞–ª—ñ–≤ –ù–£–®</h1>

  <!-- INTERACTIVE -->
  <div class="card">
    <h2>üåû –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤ (4 –±–∞–ª–∏)</h2>
    <p class="center muted">–ü–µ—Ä–µ—Ç—è–≥—É–π —Å–æ–Ω—Ü–µ ‚Äî —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π –∑–º—ñ–Ω—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏</p>
    <div class="scene" id="scene">
      <div class="sun" id="sun"></div>
      <div class="thermo"><div class="mercury" id="mercury"></div></div>
    </div>
    <div class="read" id="tempRead">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 20¬∞C</div>
  </div>

  <!-- GAME + QUIZ -->
  <div class="grid two">
    <div class="card">
      <h2>üéÆ –ú—ñ–Ω—ñ-–≥—Ä–∞ (4 –±–∞–ª–∏)</h2>
      <select id="season" class="select">
        <option value="winter">‚ùÑÔ∏è –ó–∏–º–∞</option>
        <option value="spring">üå± –í–µ—Å–Ω–∞</option>
        <option value="summer">‚òÄÔ∏è –õ—ñ—Ç–æ</option>
        <option value="autumn">üçÇ –û—Å—ñ–Ω—å</option>
      </select>
      <input id="range" class="range" type="range" min="-20" max="35" value="10"/>
      <div class="read" id="rangeVal">10¬∞C</div>
      <div class="center"><button class="btn" onclick="checkSeason()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button></div>
      <div class="center" id="seasonMsg"></div>
    </div>

    <div class="card">
      <h2>üìù –¢–µ—Å—Ç (4 –±–∞–ª–∏)</h2>
      <div class="quiz">
        <label><input type="radio" name="q" value="0"/> –ó–µ–º–ª—è –±–ª–∏–∂—á–µ –¥–æ –°–æ–Ω—Ü—è</label>
        <label><input type="radio" name="q" value="1"/> –ü—Ä–æ–º–µ–Ω—ñ –ø–∞–¥–∞—é—Ç—å –ø—ñ–¥ –±—ñ–ª—å—à–∏–º –∫—É—Ç–æ–º</label>
        <label><input type="radio" name="q" value="0"/> –°–æ–Ω—Ü–µ –±—ñ–ª—å—à–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤</label>
        <label><input type="radio" name="q" value="0"/> –•–º–∞—Ä–∏ –Ω–∞–≥—Ä—ñ–≤–∞—é—Ç—å –ø–æ–≤—ñ—Ç—Ä—è</label>
      </div>
      <div class="center"><button class="btn" onclick="checkQuiz()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button></div>
      <div class="center" id="quizMsg"></div>
    </div>
  </div>

  <!-- SCORE + SEND -->
  <div class="card center">
    <div class="score" id="finalScore">–†–µ–∑—É–ª—å—Ç–∞—Ç: 0 / 12</div>
    <div style="margin-top:10px">
      <button class="btn" onclick="sendResult()">‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç–∏ —Ç–∞ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </div>
  </div>

  <!-- LEADERBOARD -->
  <div class="lb-wrap">
    <div class="lb-head">
      <div class="lb-title">üèÜ –õ—ñ–¥–µ—Ä–±–æ—Ä–¥ –∫–ª–∞—Å—É</div>
      <button class="btn secondary" onclick="loadLeaderboard()">üîÑ –û–Ω–æ–≤–∏—Ç–∏ –ª—ñ–¥–µ—Ä–±–æ—Ä–¥</button>
    </div>
    <table class="table">
      <thead>
        <tr><th>#</th><th>–Ü–º º—è</th><th>–ö–ª–∞—Å</th><th>–í—Å—å–æ–≥–æ</th></tr>
      </thead>
      <tbody id="lbBody"></tbody>
    </table>
  </div>
</div>

<script>
/* ===== CONFIG ===== */
const SHEET_URL = "https://script.google.com/macros/s/–¢–í–Ü–ô_ID/exec";

/* ===== SCORE ===== */
let score=0, interacted=false, gameDone=false, quizDone=false;
const updateScore=()=>document.getElementById("finalScore").textContent=`–†–µ–∑—É–ª—å—Ç–∞—Ç: ${Math.min(score,12)} / 12`;

/* ===== INTERACTIVE ===== */
const sun=document.getElementById("sun"), scene=document.getElementById("scene"),
      mercury=document.getElementById("mercury"), tempRead=document.getElementById("tempRead");
let drag=false; sun.style.left="50%"; sun.style.bottom="60%";
sun.addEventListener("pointerdown",()=>drag=true);
document.addEventListener("pointerup",()=>drag=false);
scene.addEventListener("pointermove",e=>{
  if(!drag) return;
  const r=scene.getBoundingClientRect();
  let x=((e.clientX-r.left)/r.width)*100;
  let y=((e.clientY-r.top)/r.height)*100;
  x=Math.max(5,Math.min(95,x)); y=Math.max(10,Math.min(90,y));
  sun.style.left=x+"%"; sun.style.bottom=y+"%";
  const t=Math.round(5+y*.3); tempRead.textContent=`–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${t}¬∞C`;
  mercury.style.height=Math.min(100,t+20)+"%";
  if(!interacted){score+=4; interacted=true; updateScore();}
});

/* ===== GAME ===== */
const ranges={winter:[-10,0],spring:[8,15],summer:[22,30],autumn:[10,18]};
const range=document.getElementById("range"); range.oninput=()=>rangeVal.textContent=range.value+"¬∞C";
function checkSeason(){
  if(gameDone) return;
  const s=season.value, t=+range.value, [a,b]=ranges[s];
  seasonMsg.textContent = (t>=a && t<=b)
    ? (gameDone=true, score+=4, updateScore(), "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! +4")
    : "‚ùå –°–ø—Ä–æ–±—É–π —â–µ";
}

/* ===== QUIZ ===== */
function checkQuiz(){
  if(quizDone) return;
  const a=document.querySelector('input[name="q"]:checked');
  if(!a){quizMsg.textContent="–û–±–µ—Ä—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—å";return;}
  quizMsg.textContent = a.value==="1"
    ? (quizDone=true, score+=4, updateScore(), "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! +4")
    : "‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ";
}

/* ===== LEADERBOARD (local) ===== */
function saveToLeaderboard(d){
  const b=JSON.parse(localStorage.getItem("classLeaderboard")||"[]");
  const e=b.find(u=>u.name===d.name&&u.class===d.class);
  if(e) e.score=Math.max(e.score,d.score); else b.push(d);
  localStorage.setItem("classLeaderboard",JSON.stringify(b));
}
function loadLeaderboard(){
  const b=JSON.parse(localStorage.getItem("classLeaderboard")||"[]").sort((a,b)=>b.score-a.score);
  lbBody.innerHTML="";
  b.forEach((u,i)=>lbBody.innerHTML+=`<tr><td>${i+1}</td><td>${u.name}</td><td>${u.class}</td><td class="badge">${u.score}</td></tr>`);
}

/* ===== SEND (Sheets + Leaderboard) ===== */
async function sendResult(){
  // –ø—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ—Ñ—ñ–ª—é —É—á–Ω—è (–∑–∞–º—ñ–Ω–∏ –Ω–∞ —Å–≤–æ—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é)
  const user=JSON.parse(localStorage.getItem("atmosphereUser")||'{"name":"–£—á–µ–Ω—å","class":"6-–ê"}');
  const payload={name:user.name,class:user.class,theme:"–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è",score:Math.min(score,12)};
  try{
    await fetch(SHEET_URL,{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
    saveToLeaderboard(payload); loadLeaderboard();
    alert("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ!");
  }catch(e){ alert("‚ùå –ü–æ–º–∏–ª–∫–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è"); }
}
</script>
</body>
</html>


