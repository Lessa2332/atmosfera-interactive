<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ —Å–∏–º—É–ª—è—Ü—ñ—è: —á–æ–º—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º –¥–Ω—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∫—É—Ç–∞ –ø–∞–¥—ñ–Ω–Ω—è —Å–æ–Ω—è—á–Ω–∏—Ö –ø—Ä–æ–º–µ–Ω—ñ–≤. –ü–µ—Ä–µ–º—ñ—â—É–π —Å–æ–Ω—Ü–µ —Ç–∞ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π –∑–∞ —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–º!">
    <title>–ß–æ–º—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –≤–¥–µ–Ω—å? –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ç–µ—Ä–º–æ–º–µ—Ç—Ä</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
       
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            margin: 0;
            padding: 10px;
            background: linear-gradient(135deg, #e6f7ff 0%, #fff9e6 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
        }
       
        .container {
            max-width: min(1000px, 95vw);
            width: 100%;
            background-color: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: clamp(12px, 2vw, 20px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: clamp(10px, 2vw, 15px);
        }
       
        h1 {
            color: #1565c0;
            text-align: center;
            margin-bottom: clamp(5px, 1.5vw, 8px);
            font-size: clamp(1.4rem, 5vw, 2rem);
            line-height: 1.3;
            padding: 0 5px;
        }
       
        .subtitle {
            text-align: center;
            color: #666;
            font-size: clamp(0.85rem, 3vw, 1rem);
            margin-bottom: clamp(15px, 4vw, 25px);
            padding: 0 5px;
            line-height: 1.4;
        }
       
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: clamp(10px, 3vw, 20px);
            margin-bottom: clamp(10px, 3vw, 20px);
        }
       
        .simulation-panel {
            flex: 3;
            min-width: min(100%, 300px);
        }
       
        .explanation-panel {
            flex: 2;
            min-width: min(100%, 250px);
            background-color: #f9f9f9;
            padding: clamp(12px, 2vw, 16px);
            border-radius: 15px;
            border-left: 4px solid #42a5f5;
        }
       
        .scene {
            position: relative;
            width: 100%;
            height: clamp(220px, 50vh, 300px);
            min-height: 200px;
            background: linear-gradient(to bottom, #87CEEB 30%, #E0F7FA 70%);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: clamp(10px, 2vw, 15px);
            border: 2px solid #90a4ae;
            touch-action: none;
        }
       
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(to top, #8BC34A, #5D4037);
        }
       
        .sun {
            position: absolute;
            width: clamp(40px, 10vw, 60px);
            height: clamp(40px, 10vw, 60px);
            background: radial-gradient(circle at 30% 30%, #FFEB3B, #FF9800);
            border-radius: 50%;
            box-shadow: 0 0 clamp(20px, 5vw, 40px) #FF9800;
            cursor: grab;
            z-index: 10;
            user-select: none;
        }
       
        .sun:active {
            cursor: grabbing;
        }
       
        .tree {
            position: absolute;
            bottom: 30%;
            left: 50%;
            transform: translateX(-50%);
            width: clamp(50px, 12vw, 80px);
            height: clamp(80px, 20vw, 140px);
            z-index: 5;
        }
       
        .trunk {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 15px;
            height: 50%;
            background: #8B4513;
            border-radius: 8px 8px 0 0;
        }
       
        .crown {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: 80%;
            background: #4CAF50;
            border-radius: 50%;
        }
       
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 6;
        }
       
        .thermometer-container {
            position: absolute;
            bottom: 32%;
            right: clamp(5px, 2vw, 15px);
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 7;
        }
       
        .thermometer {
            width: clamp(20px, 5vw, 30px);
            height: clamp(120px, 35vh, 180px);
            background: linear-gradient(to top, #e0e0e0, #f5f5f5);
            border-radius: clamp(8px, 2vw, 12px);
            position: relative;
            overflow: hidden;
            border: 2px solid #78909C;
        }
       
        .mercury {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(to top, #2196F3, #EF5350);
            transition: height 0.8s ease;
            border-radius: clamp(6px, 1.5vw, 10px);
        }
       
        .thermometer-scale {
            position: absolute;
            left: clamp(-18px, -4vw, -25px);
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            font-size: clamp(0.65rem, 2vw, 0.8rem);
            color: #555;
            font-weight: bold;
        }
       
        .controls-container {
            width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            -webkit-overflow-scrolling: touch;
            padding-bottom: 8px;
            margin-bottom: 10px;
        }
       
        .controls {
            display: flex;
            gap: 8px;
            min-width: max-content;
            padding: 0 5px;
        }
       
        .time-button {
            padding: clamp(8px, 2vw, 10px) clamp(10px, 2.5vw, 15px);
            background-color: #42a5f5;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: clamp(0.75rem, 2.2vw, 0.9rem);
            min-height: 44px;
            min-width: 100px;
            white-space: nowrap;
            flex-shrink: 0;
        }
       
        .time-button:hover {
            background-color: #1e88e5;
        }
       
        .time-button.active {
            background-color: #0d47a1;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
       
        .readings {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            background-color: #e3f2fd;
            padding: clamp(12px, 2.5vw, 16px);
            border-radius: 10px;
            margin-top: clamp(10px, 3vw, 15px);
        }
       
        .temp-reading {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
       
        .temp-value {
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            font-weight: bold;
            color: #d32f2f;
            line-height: 1.2;
        }
       
        .temp-label {
            font-size: clamp(0.7rem, 2vw, 0.85rem);
            color: #666;
            margin-top: 4px;
        }
       
        .status {
            text-align: center;
            padding: clamp(12px, 2.5vw, 16px);
            margin-top: clamp(10px, 2.5vw, 15px);
            border-radius: 10px;
            background-color: #fff3e0;
            font-weight: bold;
            font-size: clamp(0.9rem, 2.8vw, 1.1rem);
            line-height: 1.4;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
       
        .drag-hint {
            text-align: center;
            margin-top: 8px;
            font-style: italic;
            color: #666;
            font-size: clamp(0.8rem, 2.2vw, 0.95rem);
        }
       
        .author-note {
            text-align: center;
            font-size: 0.8rem;
            color: #666;
            margin-top: 20px;
            padding: 12px;
            background-color: #f5f5f5;
            border-radius: 8px;
        }
       
        h3 {
            color: #1565c0;
            margin-bottom: 12px;
            font-size: clamp(1.1rem, 3vw, 1.3rem);
        }
       
        .explanation-text {
            line-height: 1.5;
            font-size: clamp(0.85rem, 2.2vw, 0.95rem);
            margin-bottom: 15px;
        }
       
        .key-factor {
            display: flex;
            align-items: flex-start;
            margin: 10px 0;
            padding: 10px;
            background-color: #f1f8e9;
            border-radius: 8px;
            font-size: clamp(0.8rem, 2.2vw, 0.9rem);
        }
       
        .factor-icon {
            font-size: clamp(1.2rem, 3vw, 1.5em);
            margin-right: 12px;
            color: #FF9800;
            flex-shrink: 0;
        }
       
        @media (max-width: 768px) {
            .main-content { flex-direction: column; }
            .scene { height: clamp(180px, 45vh, 250px); }
            .explanation-panel { order: 3; margin-top: 15px; }
        }
       
        @media (max-width: 480px) {
            body { padding: 8px; }
            .scene { height: clamp(160px, 40vh, 220px); }
            .thermometer { height: clamp(100px, 30vh, 150px); }
            .key-factor { flex-direction: column; text-align: center; }
            .factor-icon { margin-right: 0; margin-bottom: 8px; }
        }
       
        @media (max-height: 500px) and (orientation: landscape) {
            .scene { height: clamp(120px, 40vh, 180px); }
            .thermometer { height: 100px; }
        }
       
        .controls-container::-webkit-scrollbar {
            height: 6px;
        }
        .controls-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        .controls-container::-webkit-scrollbar-thumb {
            background: #42a5f5;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è —Ç–∞ –∫—É—Ç –ø–∞–¥—ñ–Ω–Ω—è –ø—Ä–æ–º–µ–Ω—ñ–≤</h1>
        <p class="subtitle">–ü–µ—Ä–µ–º—ñ—â—É–π —Å–æ–Ω—Ü–µ –ø–æ –Ω–µ–±—É —Ç–∞ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π, —è–∫ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —ñ –∫—É—Ç –ø–∞–¥—ñ–Ω–Ω—è –ø—Ä–æ–º–µ–Ω—ñ–≤!</p>
       
        <div class="main-content">
            <div class="simulation-panel">
                <div class="scene" id="scene">
                    <div class="ground"></div>
                    <div class="tree">
                        <div class="trunk"></div>
                        <div class="crown"></div>
                    </div>
                    <div class="sun" id="sun"></div>
                    <canvas id="raysCanvas"></canvas>
                    <div class="thermometer-container">
                        <div class="thermometer">
                            <div class="mercury" id="mercury"></div>
                            <div class="thermometer-scale">
                                <span>40¬∞C</span>
                                <span>20¬∞C</span>
                                <span>0¬∞C</span>
                                <span>-20¬∞C</span>
                            </div>
                        </div>
                        <div class="temp-label">–¢–µ—Ä–º–æ–º–µ—Ç—Ä</div>
                    </div>
                </div>
                <p class="drag-hint" id="dragHint">üëÜ –¢–æ—Ä–∫–∞–π—Å—è —Ç–∞ –ø–µ—Ä–µ—Ç—è–≥—É–π —Å–æ–Ω—Ü–µ –ø–æ –Ω–µ–±—É</p>
               
                <div class="controls-container">
                    <div class="controls">
                        <button class="time-button active" data-time="6">üåÖ –†–∞–Ω–æ–∫<br>(6:00)</button>
                        <button class="time-button" data-time="9">üå§Ô∏è –î–æ –æ–±—ñ–¥—É<br>(9:00)</button>
                        <button class="time-button" data-time="12">‚òÄÔ∏è –û –ø—ñ–≤–¥–Ω—ñ<br>(12:00)</button>
                        <button class="time-button" data-time="15">üåû –ü—ñ—Å–ª—è –æ–±—ñ–¥—É<br>(15:00)</button>
                        <button class="time-button" data-time="18">üåÜ –í–µ—á—ñ—Ä<br>(18:00)</button>
                        <button class="time-button" data-time="21">üåô –ù—ñ—á<br>(21:00)</button>
                    </div>
                </div>
               
                <div class="readings">
                    <div class="temp-reading">
                        <div class="temp-value" id="tempC">22</div>
                        <div class="temp-label">–≥—Ä–∞–¥—É—Å—ñ–≤ –¶–µ–ª—å—Å—ñ—è (¬∞C)</div>
                    </div>
                    <div class="temp-reading">
                        <div class="temp-value" id="tempF">72</div>
                        <div class="temp-label">–≥—Ä–∞–¥—É—Å—ñ–≤ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞ (¬∞F)</div>
                    </div>
                </div>
               
                <div class="status" id="status">
                    –°–æ–Ω—Ü–µ –≤ –∑–µ–Ω—ñ—Ç—ñ. –ü—Ä–æ–º–µ–Ω—ñ –ø–∞–¥–∞—é—Ç—å –ø—ñ–¥ –≤–µ–ª–∏–∫–∏–º –∫—É—Ç–æ–º ‚Äî –ø–ª–æ—â–∞ –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è –º–∞–ª–∞, —Ç–æ–º—É —Ç–µ–ø–ª–æ.
                </div>
            </div>
           
            <div class="explanation-panel">
                <h3>–ü–æ—è—Å–Ω–µ–Ω–Ω—è</h3>
                <p class="explanation-text">
                    –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è –∑–º—ñ–Ω—é—î—Ç—å—Å—è –ø—Ä–æ—Ç—è–≥–æ–º –¥–æ–±–∏ —á–µ—Ä–µ–∑ <strong>—Ä—ñ–∑–Ω–∏–π –∫—É—Ç –ø–∞–¥—ñ–Ω–Ω—è —Å–æ–Ω—è—á–Ω–∏—Ö –ø—Ä–æ–º–µ–Ω—ñ–≤</strong>.
                </p>
                <div class="key-factor">
                    <div class="factor-icon">‚òÄÔ∏è</div>
                    <div>
                        <strong>–ö—É—Ç –ø–∞–¥—ñ–Ω–Ω—è –ø—Ä–æ–º–µ–Ω—ñ–≤:</strong><br>
                        –ß–∏–º –≤–∏—â–µ –°–æ–Ω—Ü–µ, —Ç–∏–º –∫—É—Ç–∏ –±–ª–∏–∂—á–µ –¥–æ –ø—Ä—è–º–æ–≥–æ (90¬∞). –ü—Ä–æ–º–µ–Ω—ñ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä—É—é—Ç—å—Å—è –Ω–∞ –º–µ–Ω—à—ñ–π –ø–ª–æ—â—ñ —Ç–∞ –≥—Ä—ñ—é—Ç—å —Å–∏–ª—å–Ω—ñ—à–µ.
                    </div>
                </div>
                <div class="key-factor">
                    <div class="factor-icon">üìà</div>
                    <div>
                        <strong>–ó–∞–ø—ñ–∑–Ω–µ–Ω–Ω—è –Ω–∞–≥—Ä—ñ–≤—É:</strong><br>
                        –ù–∞–π—Ç–µ–ø–ª—ñ—à–µ –æ 14‚Äì15 –≥–æ–¥–∏–Ω—ñ, –∞ –Ω–µ –æ 12:00, —Ç–æ–º—É —â–æ –∑–µ–º–ª—è —Ç–∞ –ø–æ–≤—ñ—Ç—Ä—è –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —á–∞—Å—É, —â–æ–± –Ω–∞–≥—Ä—ñ—Ç–∏—Å—è.
                    </div>
                </div2>
                <div class="key-factor">
                    <div class="key-factor">
                    <div class="factor-icon">üå°Ô∏è</div>
                    <div>
                        <strong>–ú—ñ–Ω—ñ–º—É–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏:</strong><br>
                        –ù–∞–π—Ö–æ–ª–æ–¥–Ω—ñ—à–µ –ø–µ—Ä–µ–¥ —Å–≤—ñ—Ç–∞–Ω–∫–æ–º, –∫–æ–ª–∏ –∑–µ–º–ª—è –≤—Ç—Ä–∞—Ç–∏–ª–∞ —Ç–µ–ø–ª–æ –∑–∞ –Ω—ñ—á, –∞ –°–æ–Ω—Ü–µ —â–µ –Ω–µ –∑—ñ–π—à–ª–æ.
                    </div>
                </div>
                <p class="explanation-text">
                    –¢–∞–∫–æ–∂ –Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤–ø–ª–∏–≤–∞—é—Ç—å <strong>—Ö–º–∞—Ä–Ω—ñ—Å—Ç—å, –æ–ø–∞–¥–∏ —Ç–∞ –≤—ñ—Ç–µ—Ä</strong>, –∞–ª–µ –æ—Å–Ω–æ–≤–Ω–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º —î –∫—É—Ç –ø–∞–¥—ñ–Ω–Ω—è —Å–æ–Ω—è—á–Ω–∏—Ö –ø—Ä–æ–º–µ–Ω—ñ–≤.
                </p>
                <div style="margin-top: 15px; padding: 10px; background-color: #e8f5e9; border-radius: 8px; font-size: 0.85rem;">
                    <strong>üí° –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç:</strong> –ü–æ—Å—Ç–∞–≤ —Å–æ–Ω—Ü–µ –Ω–∏–∑—å–∫–æ –Ω–∞–¥ –æ–±—Ä—ñ—î–º —ñ –ø–æ–¥–∏–≤–∏—Å—å, —è–∫ –ø–∞–¥–∞—î —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞. –ü–æ—Ç—è–≥–Ω–∏ –π–æ–≥–æ –≤ –∑–µ–Ω—ñ—Ç ‚Äî —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑—Ä–æ—Å—Ç–µ!
                </div>
            </div>
        </div>
       
        <div class="author-note">
            –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –º–æ–¥–µ–ª—å: –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ –ø–æ–≤—ñ—Ç—Ä—è –≤—ñ–¥ –∫—É—Ç–∞ –ø–∞–¥—ñ–Ω–Ω—è –ø—Ä–æ–º–µ–Ω—ñ–≤ –°–æ–Ω—Ü—è –Ω–∞ –∑–µ–º–Ω—É –ø–æ–≤–µ—Ä—Ö–Ω—é.<br>
            –ê–≤—Ç–æ—Ä: –ë–æ—Ö–æ–Ω–æ–∫ –û–ª–µ—Å—è
        </div>
    </div>

    <script>
        const sun = document.getElementById('sun');
        const scene = document.getElementById('scene');
        const canvas = document.getElementById('raysCanvas');
        const ctx = canvas.getContext('2d');
        const mercury = document.getElementById('mercury');
        const tempCElem = document.getElementById('tempC');
        const tempFElem = document.getElementById('tempF');
        const statusElem = document.getElementById('status');
        const timeButtons = document.querySelectorAll('.time-button');
        const dragHint = document.getElementById('dragHint');

        const isTouchDevice = ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);

        if (isTouchDevice) {
            dragHint.textContent = "üëÜ –¢–æ—Ä–∫–∞–π—Å—è —Ç–∞ –ø–µ—Ä–µ—Ç—è–≥—É–π —Å–æ–Ω—Ü–µ –ø–æ –Ω–µ–±—É";
        } else {
            dragHint.textContent = "üñ±Ô∏è –ö–ª—ñ–∫–Ω–∏ —Ç–∞ –ø–µ—Ä–µ—Ç—è–≥—É–π —Å–æ–Ω—Ü–µ –º–∏—à–∫–æ—é";
        }

        function resizeCanvas() {
            canvas.width = scene.clientWidth;
            canvas.height = scene.clientHeight;
            drawRays();
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('orientationchange', resizeCanvas);

        function getBoundaries() {
            const sunWidth = sun.offsetWidth;
            const sceneWidth = scene.offsetWidth;
            const sceneHeight = scene.offsetHeight;
            return {
                minX: sunWidth/2/sceneWidth*100,
                maxX: 100 - sunWidth/2/sceneWidth*100,
                minY: 30,
                maxY: 88
            };
        }

        const timeMap = {
            6: { x: 12, y: 32, temp: 6, status: "–†–∞–Ω–æ–∫. –°–æ–Ω—Ü–µ –Ω–∏–∑—å–∫–æ –Ω–∞–¥ –æ–±—Ä—ñ—î–º. –ü—Ä–æ–º–µ–Ω—ñ –∫–æ–≤–∑–∞—é—Ç—å –ø–æ –ø–æ–≤–µ—Ä—Ö–Ω—ñ, —Å–ª–∞–±–∫–µ –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è." },
            9: { x: 28, y: 58, temp: 14, status: "–î–æ –æ–±—ñ–¥—É. –°–æ–Ω—Ü–µ –ø—ñ–¥–Ω—è–ª–æ—Å—è. –ö—É—Ç –ø–∞–¥—ñ–Ω–Ω—è –∑–±—ñ–ª—å—à–∏–≤—Å—è, –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∏–ª–æ—Å—è." },
            12: { x: 50, y: 88, temp: 22, status: "–û –ø—ñ–≤–¥–Ω—ñ. –°–æ–Ω—Ü–µ –≤ –∑–µ–Ω—ñ—Ç—ñ. –ü—Ä–æ–º–µ–Ω—ñ –ø–∞–¥–∞—é—Ç—å –ø—ñ–¥ –Ω–∞–π–±—ñ–ª—å—à–∏–º –∫—É—Ç–æ–º, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è." },
            15: { x: 72, y: 78, temp: 25, status: "–ü—ñ—Å–ª—è –æ–±—ñ–¥—É. –°–æ–Ω—Ü–µ –æ–ø—É—Å–∫–∞—î—Ç—å—Å—è, –∞–ª–µ –∑–µ–º–ª—è —â–µ —Ç–µ–ø–ª–∞. –ù–∞–π—Ç–µ–ø–ª—ñ—à–∞ –ø–æ—Ä–∞ –¥–æ–±–∏." },
            18: { x: 88, y: 42, temp: 18, status: "–í–µ—á—ñ—Ä. –°–æ–Ω—Ü–µ —Å—ñ–¥–∞—î. –ö—É—Ç –ø–∞–¥—ñ–Ω–Ω—è –∑–º–µ–Ω—à—É—î—Ç—å—Å—è, –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è —Å–ª–∞–±—à–∞—î." },
            21: { x: 95, y: 30, temp: 10, status: "–ù—ñ—á. –°–æ–Ω—Ü–µ –∑–∞ –æ–±—Ä—ñ—î–º. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–∞–¥–∞—î, –±–æ –∑–µ–º–ª—è –≤–∏–ø—Ä–æ–º—ñ–Ω—é—î —Ç–µ–ø–ª–æ." }
        };

        let sunX = 50, sunY = 88, currentTemp = 22;

        function drawRays() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if (sunY < 35) return;

            const sunRect = sun.getBoundingClientRect();
            const sceneRect = scene.getBoundingClientRect();
            const sunCX = sunRect.left + sunRect.width / 2 - sceneRect.left;
            const sunCY = sunRect.top + sunRect.height / 2 - sceneRect.top;
            const targetX = canvas.width / 2;
            const targetY = canvas.height * 0.7;

            const dx = targetX - sunCX;
            const dy = targetY - sunCY;
            const dist = Math.hypot(dx, dy);
            if (dist === 0) return;

            const normX = dx / dist;
            const normY = dy / dist;
            const perpX = -normY;
            const perpY = normX;

            const spread = Math.min(120, canvas.width * 0.3);
            const numRays = canvas.width < 400 ? 3 : 5;

            let minX = Infinity, maxX = -Infinity;

            ctx.strokeStyle = '#FFB300';
            ctx.lineWidth = canvas.width < 400 ? 4 : 6;
            ctx.fillStyle = '#1565c0';
            ctx.font = canvas.width < 400 ? 'bold 16px Arial' : 'bold 20px Arial';
            ctx.textAlign = 'center';

            for (let i = 0; i < numRays; i++) {
                const t = (i / (numRays - 1)) - 0.5;
                const offset = t * spread;
                const startX = sunCX + perpX * offset;
                const startY = sunCY + perpY * offset;
                const endX = targetX + perpX * offset;
                const endY = targetY + perpY * offset;

                ctx.beginPath();
                ctx.moveTo(startX, startY);
                ctx.lineTo(endX, endY);
                ctx.stroke();

                const angle = Math.atan2(dy, dx);
                const head = canvas.width < 400 ? 12 : 18;
                ctx.beginPath();
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - head * Math.cos(angle - Math.PI/6), endY - head * Math.sin(angle - Math.PI/6));
                ctx.moveTo(endX, endY);
                ctx.lineTo(endX - head * Math.cos(angle + Math.PI/6), endY - head * Math.sin(angle + Math.PI/6));
                ctx.stroke();

                minX = Math.min(minX, endX);
                maxX = Math.max(maxX, endX);
            }

            ctx.strokeStyle = '#F57C00';
            ctx.lineWidth = canvas.width < 400 ? 10 : 14;
            ctx.beginPath();
            ctx.moveTo(minX, targetY + 8);
            ctx.lineTo(maxX, targetY + 8);
            ctx.stroke();

            ctx.fillStyle = '#1565c0';
            ctx.fillText('–ü–ª–æ—â–∞ –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è', canvas.width/2, targetY + 30);
            if (canvas.width >= 400) {
                ctx.font = '14px Arial';
                ctx.fillText('(—á–∏–º –º–µ–Ω—à–∞ ‚Äî —Ç–∏–º —Ç–µ–ø–ª—ñ—à–µ!)', canvas.width/2, targetY + 50);
            }

            ctx.strokeStyle = '#2196F3';
            ctx.lineWidth = canvas.width < 400 ? 3 : 4;
            ctx.setLineDash([10, 8]);
            ctx.beginPath();
            ctx.moveTo(targetX, targetY);
            ctx.lineTo(targetX, targetY - 150);
            ctx.stroke();
            ctx.setLineDash([]);

            const angle = Math.round(10 + (sunY - 30) / (88 - 30) * 80);
            ctx.fillStyle = '#d32f2f';
            ctx.font = canvas.width < 400 ? 'bold 18px Arial' : 'bold 24px Arial';
            ctx.fillText(`–ö—É—Ç: ${angle}¬∞`, canvas.width / 2, 50);
        }

        function updateTemperature(temp) {
            currentTemp = temp;
            tempCElem.textContent = temp;
            tempFElem.textContent = Math.round(temp * 9/5 + 32);

            const minTemp = -20;
            const maxTemp = 40;
            const height = ((temp - minTemp) / (maxTemp - minTemp)) * 100;
            mercury.style.height = `${Math.max(0, Math.min(100, height))}%`;

            if (temp < 0) {
                mercury.style.background = 'linear-gradient(to top, #2196F3, #64B5F6)';
            } else if (temp < 15) {
                mercury.style.background = 'linear-gradient(to top, #4CAF50, #81C784)';
            } else if (temp < 25) {
                mercury.style.background = 'linear-gradient(to top, #FF9800, #FFB74D)';
            } else {
                mercury.style.background = 'linear-gradient(to top, #F44336, #EF5350)';
            }
        }

        function updatePosition(x, y) {
            const b = getBoundaries();
            sunX = Math.max(b.minX, Math.min(b.maxX, x));
            sunY = Math.max(b.minY, Math.min(b.maxY, y));
            sun.style.left = `${sunX}%`;
            sun.style.bottom = `${sunY}%`;

            const normalizedHeight = (sunY - b.minY) / (b.maxY - b.minY);
            let temp = 4 + normalizedHeight * 22;
            if (sunX > 50) {
                const afternoonFactor = Math.sin((sunX - 50)/45 * Math.PI);
                temp += afternoonFactor * 6;
            }

            updateTemperature(Math.round(temp));
            drawRays();
            updateStatus();
        }

        function updateStatus() {
            let statusText = "";
            const angle = Math.round(10 + (sunY - 30) / (88 - 30) * 80);

            if (sunX < 25) statusText = `–†–∞–Ω–æ–∫. –°–æ–Ω—Ü–µ –Ω–∏–∑—å–∫–æ. –ö—É—Ç: ${angle}¬∞. –ü—Ä–æ–º–µ–Ω—ñ –∫–æ–≤–∑–∞—é—Ç—å –ø–æ –ø–æ–≤–µ—Ä—Ö–Ω—ñ.`;
            else if (sunX < 40) statusText = `–î–æ –æ–±—ñ–¥—É. –°–æ–Ω—Ü–µ –ø—ñ–¥–Ω—è–ª–æ—Å—è. –ö—É—Ç: ${angle}¬∞. –ù–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∏–ª–æ—Å—è.`;
            else if (sunX < 60) statusText = `–û –ø—ñ–≤–¥–Ω—ñ. –°–æ–Ω—Ü–µ –≤ –∑–µ–Ω—ñ—Ç—ñ. –ö—É—Ç: ${angle}¬∞. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–µ –Ω–∞–≥—Ä—ñ–≤–∞–Ω–Ω—è.`;
            else if (sunX < 80) statusText = `–ü—ñ—Å–ª—è –æ–±—ñ–¥—É. –°–æ–Ω—Ü–µ –æ–ø—É—Å–∫–∞—î—Ç—å—Å—è. –ö—É—Ç: ${angle}¬∞. –ó–µ–º–ª—è —â–µ —Ç–µ–ø–ª–∞.`;
            else statusText = `–í–µ—á—ñ—Ä/–Ω—ñ—á. –°–æ–Ω—Ü–µ –Ω–∏–∑—å–∫–æ. –ö—É—Ç: ${angle}¬∞. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–∞–¥–∞—î.`;

            statusElem.textContent = statusText;
        }

        // Drag-and-drop
        let isDragging = false;
        let startX = 0, startY = 0;
        let startSunX = 0, startSunY = 0;

        const startDrag = (e) => {
            e.preventDefault();
            isDragging = true;
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            startX = clientX;
            startY = clientY;
            startSunX = sunX;
            startSunY = sunY;
        };

        const moveDrag = (e) => {
            if (!isDragging) return;
            e.preventDefault();
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            const dx = clientX - startX;
            const dy = clientY - startY;
            const rect = scene.getBoundingClientRect();
            const deltaX = (dx / rect.width) * 100;
            const deltaY = -(dy / rect.height) * 100;
            updatePosition(startSunX + deltaX, startSunY + deltaY);
        };

        const endDrag = () => { isDragging = false; };

        sun.addEventListener('mousedown', startDrag);
        sun.addEventListener('touch poison', startDrag);
        document.addEventListener('mousemove', moveDrag);
        document.addEventListener('touchmove', moveDrag);
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);

        // –ö–Ω–æ–ø–∫–∏ —á–∞—Å—É
        timeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const time = parseInt(btn.dataset.time);
                const data = timeMap[time];
                timeButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                sun.style.transition = 'left 0.8s ease-out, bottom 0.8s ease-out';
                updatePosition(data.x, data.y);
                updateTemperature(data.temp);
                statusElem.textContent = data.status;
                setTimeout(() => sun.style.transition = '', 800);
            });
        });

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        updatePosition(50, 88);
        updateStatus Eye();
        drawRays();
    </script>
</body>
</html>