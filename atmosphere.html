<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ–≤—ñ—Ç—Ä—è - –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –¥–ª—è 6 –∫–ª–∞—Å—É</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --kid-blue: #4DC3FF;
  --kid-orange: #FF9966;
  --kid-green: #66FF99;
  --kid-purple: #CC99FF;
  --kid-yellow: #FFCC00;
  --kid-pink: #FF66CC;
}
body {
  background: linear-gradient(135deg, #0a192f 0%, #1a365d 100%);
  color: white;
  font-family: 'Nunito', sans-serif;
  margin: 0;
  padding: 20px;
  min-height: 100vh;
}
.container {
  max-width: 1100px;
  margin: 0 auto;
}
.quest-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 0;
  margin-bottom: 20px;
  border-bottom: 3px dotted var(--kid-blue);
}
.user-info {
  display: flex;
  align-items: center;
  gap: 15px;
}
.user-avatar {
  width: 60px;
  height: 60px;
  background: linear-gradient(45deg, var(--kid-blue), var(--kid-purple));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  box-shadow: 0 0 20px var(--kid-blue);
}
.points-display {
  background: rgba(255, 204, 0, 0.3);
  padding: 10px 20px;
  border-radius: 50px;
  border: 2px solid var(--kid-yellow);
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
}
.task-card, .quiz-game {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 25px;
  margin: 25px 0;
  border: 2px solid var(--kid-green);
}
.btn-primary {
  background: linear-gradient(145deg, var(--kid-green), var(--kid-blue));
  color: black;
  border: none;
  padding: 12px 25px;
  border-radius: 50px;
  font-weight: bold;
  cursor: pointer;
  font-size: 18px;
  transition: all 0.3s;
}
.btn-primary:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px var(--kid-green);
}
.completed {
  background: rgba(102, 255, 153, 0.2) !important;
  border-left: 5px solid var(--kid-green);
}
.answer-btn {
  display: block;
  width: 100%;
  text-align: left;
  padding: 15px;
  margin: 10px 0;
  background: rgba(255,255,255,0.1);
  border: 2px solid var(--kid-blue);
  border-radius: 15px;
  color: white;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s;
}
.answer-btn:hover {
  background: rgba(255,255,255,0.2);
  transform: translateX(5px);
}
.answer-btn.correct {
  background: rgba(102, 255, 153, 0.4);
  border-color: var(--kid-green);
}
.answer-btn.wrong {
  background: rgba(255, 102, 102, 0.4);
  border-color: #ff6666;
}
.answer-icon {
  display: inline-block;
  width: 30px;
  height: 30px;
  background: var(--kid-blue);
  border-radius: 50%;
  text-align: center;
  line-height: 30px;
  margin-right: 10px;
  color: black;
  font-weight: bold;
}
#graphCanvas {
  width: 100%;
  height: 200px;
  background: rgba(0,0,0,0.2);
  border-radius: 10px;
  margin: 15px 0;
}
textarea {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  background: rgba(255,255,255,0.1);
  border: 1px solid var(--kid-blue);
  color: white;
  margin: 10px 0;
}
.reward-badge {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(135deg, gold, orange);
  padding: 30px;
  border-radius: 20px;
  z-index: 1000;
  box-shadow: 0 0 50px rgba(255, 215, 0, 0.8);
  display: none;
  text-align: center;
  max-width: 400px;
}
</style>
</head>
<body>
<div class="container">
  <!-- –•–µ–¥–µ—Ä -->
  <div class="quest-header">
    <div class="user-info">
      <a href="index.html" class="btn-primary" style="font-size:16px; padding:8px 16px;">
        <i class="fas fa-home"></i> –ì–æ–ª–æ–≤–Ω–∞
      </a>
      <div class="user-avatar">
        <i class="fas fa-user-astronaut"></i>
      </div>
      <div>
        <div id="userName">–ü—Ä–∏–≤—ñ—Ç, –¥–æ—Å–ª—ñ–¥–Ω–∏–∫—É!</div>
        <div id="userClass" style="font-size:14px; opacity:0.8;">6 –∫–ª–∞—Å</div>
      </div>
    </div>
    <div class="points-display">
      <i class="fas fa-gem"></i> <span id="totalPoints">0</span> –±–∞–ª—ñ–≤
    </div>
  </div>

  <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 1: –°–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è -->
  <div class="task-card" id="task1Card">
    <h3>üî≠ –ó–∞–≤–¥–∞–Ω–Ω—è 1: –°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π –∑–∞ –°–æ–Ω—Ü–µ–º</h3>
    <p>–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –°–æ–Ω—Ü–µ –≤–≥–æ—Ä—É/–≤–Ω–∏–∑ —ñ –ø–æ–¥–∏–≤–∏—Å—å, —è–∫ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –≤–∏—Å–æ—Ç–∞—Ö.</p>
    
    <div style="position:relative; height:300px; background:linear-gradient(to bottom, #87CEEB, #1E3A5F); border-radius:15px; overflow:hidden;">
      <div id="sun" style="position:absolute; width:60px; height:60px; background:#FFD700; border-radius:50%; 
          top:200px; left:50%; transform:translateX(-50%); cursor:grab; box-shadow:0 0 20px #FFA500;"></div>
      
      <div style="position:absolute; left:20%; bottom:30px; text-align:center; color:white;">
        <div>0 –º</div>
        <div id="temp0">+20¬∞C</div>
      </div>
      <div style="position:absolute; left:40%; bottom:100px; text-align:center; color:white;">
        <div>1000 –º</div>
        <div id="temp1">+14¬∞C</div>
      </div>
      <div style="position:absolute; left:60%; bottom:170px; text-align:center; color:white;">
        <div>2000 –º</div>
        <div id="temp2">+8¬∞C</div>
      </div>
      <div style="position:absolute; left:80%; bottom:240px; text-align:center; color:white;">
        <div>3000 –º</div>
        <div id="temp3">+2¬∞C</div>
      </div>
    </div>
    
    <p id="task1Status" style="margin-top:10px; color:var(--kid-green);"></p>
  </div>

  <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 2: –ì—Ä–∞—Ñ—ñ–∫ -->
  <div class="task-card" id="task2Card">
    <h3>üìä –ó–∞–≤–¥–∞–Ω–Ω—è 2: –ü–æ–±—É–¥—É–π –≥—Ä–∞—Ñ—ñ–∫ –¥–æ–±–æ–≤–æ–≥–æ —Ö–æ–¥—É —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏</h3>
    <p>–ù–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É, —â–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ–±—É–¥—É–≤–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–∏–ø–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.</p>
    <button id="buildGraphBtn" class="btn-primary">–ü–æ–±—É–¥—É–≤–∞—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫</button>
    <div id="graphResult" style="margin-top:15px; color:var(--kid-yellow);"></div>
    <p id="task2Status" style="margin-top:10px; color:var(--kid-green);"></p>
  </div>

  <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 3: –ê–Ω–∞–ª—ñ–∑ –ø–æ–≥–æ–¥–∏ -->
  <div class="task-card" id="task3Card">
    <h3>üå¶Ô∏è –ó–∞–≤–¥–∞–Ω–Ω—è 3: –ê–Ω–∞–ª—ñ–∑—É–π –ø–æ–≥–æ–¥—É —Å–≤–æ—î—ó –º—ñ—Å—Ü–µ–≤–æ—Å—Ç—ñ</h3>
    <p>–û–ø–∏—à–∏, —è–∫–∞ –∑–∞—Ä–∞–∑ –ø–æ–≥–æ–¥–∞ —É —Ç–≤–æ—î–º—É –º—ñ—Å—Ç—ñ/—Å–µ–ª—ñ, —ñ –æ—Ç—Ä–∏–º–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –±–µ–∑–ø–µ–∫–∏:</p>
    <textarea id="weatherInput" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: —Å–æ–Ω—è—á–Ω–æ, +22¬∞C, –ª–µ–≥–∫–∏–π –≤—ñ—Ç–µ—Ä..." rows="3"></textarea>
    <button id="submitWeather" class="btn-primary">–û—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</button>
    <div id="recommendations" style="margin-top:15px; background:rgba(0,255,255,0.1); padding:15px; border-radius:10px;"></div>
    <p id="task3Status" style="margin-top:10px; color:var(--kid-green);"></p>
  </div>

  <!-- –ó–∞–≤–¥–∞–Ω–Ω—è 4: –¢–µ—Å—Ç -->
  <div class="quiz-game" id="task4Card">
    <h2 style="color: var(--kid-pink); text-align: center; margin-bottom: 30px;">
      <i class="fas fa-gamepad"></i> –ü–ï–†–ï–í–Ü–† –°–ï–ë–ï: –¢–ï–°–¢-–ì–†–ê
    </h2>
    
    <div class="question-card">
      <h3 style="color: var(--kid-blue);">
        <i class="fas fa-question-circle"></i> –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 1: –ß–æ–º—É –≤ –≥–æ—Ä–∞—Ö —Ö–æ–ª–æ–¥–Ω—ñ—à–µ, –Ω—ñ–∂ –Ω–∞ —Ä—ñ–≤–Ω–∏–Ω—ñ?
      </h3>
      <div class="answer-options">
        <button class="answer-btn" data-correct="true" onclick="checkAnswer(this, 1)">
          <span class="answer-icon">A</span>
          –ü–æ–≤—ñ—Ç—Ä—è –Ω–∞–≥—Ä—ñ–≤–∞—î—Ç—å—Å—è –≤—ñ–¥ –∑–µ–º–Ω–æ—ó –ø–æ–≤–µ—Ä—Ö–Ω—ñ, –∞ –≤ –≥–æ—Ä–∞—Ö –ø–æ–≤–µ—Ä—Ö–Ω—è –¥–∞–ª–µ–∫–æ
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 1)">
          <span class="answer-icon">B</span>
          –¢–∞–º —Å–∏–ª—å–Ω—ñ—à–∏–π –≤—ñ—Ç–µ—Ä
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 1)">
          <span class="answer-icon">C</span>
          –°–æ–Ω—Ü–µ —Ç–∞–º –º–µ–Ω—à–µ —Å–≤—ñ—Ç–∏—Ç—å
        </button>
      </div>
    </div>
    
    <div class="question-card">
      <h3 style="color: var(--kid-blue);">
        <i class="fas fa-question-circle"></i> –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 2: –ö–æ–ª–∏ –≤–¥–µ–Ω—å –Ω–∞–π–≤–∏—â–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞?
      </h3>
      <div class="answer-options">
        <button class="answer-btn" data-correct="true" onclick="checkAnswer(this, 2)">
          <span class="answer-icon">A</span>
          –û 14-15 –≥–æ–¥–∏–Ω—ñ (—á–µ—Ä–µ–∑ 2-3 –≥–æ–¥–∏–Ω–∏ –ø—ñ—Å–ª—è –ø–æ–ª—É–¥–Ω—è)
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 2)">
          <span class="answer-icon">B</span>
          –û 12:00 —Ç–æ—á–Ω–æ –≤ –ø–æ–ª—É–¥–µ–Ω—å
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 2)">
          <span class="answer-icon">C</span>
          –û 10:00 —Ä–∞–Ω–∫—É
        </button>
      </div>
    </div>
    
    <div class="question-card">
      <h3 style="color: var(--kid-blue);">
        <i class="fas fa-question-circle"></i> –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 3: –Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏–º—ñ—Ä—é–≤–∞—Ç–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –ø–æ–≤—ñ—Ç—Ä—è?
      </h3>
      <div class="answer-options">
        <button class="answer-btn" data-correct="true" onclick="checkAnswer(this, 3)">
          <span class="answer-icon">A</span>
          –¢–µ—Ä–º–æ–º–µ—Ç—Ä–æ–º —É –∑–∞—Ç—ñ–Ω–∫—É, –Ω–∞ –≤–∏—Å–æ—Ç—ñ 2 –º–µ—Ç—Ä–∏
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 3)">
          <span class="answer-icon">B</span>
          –ù–∞ —Å–æ–Ω—Ü—ñ, —â–æ–± —à–≤–∏–¥—à–µ –Ω–∞–≥—Ä—ñ–ª–æ—Å—è
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 3)">
          <span class="answer-icon">C</span>
          –ë—É–¥—å-–¥–µ, –≥–æ–ª–æ–≤–Ω–µ ‚Äî –Ω–∞ –≤–∏—Å–æ—Ç—ñ
        </button>
      </div>
    </div>
    
    <div class="question-card">
      <h3 style="color: var(--kid-blue);">
        <i class="fas fa-question-circle"></i> –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 4: –©–æ —Ç–∞–∫–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞ –∞–º–ø–ª—ñ—Ç—É–¥–∞?
      </h3>
      <div class="answer-options">
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 4)">
          <span class="answer-icon">A</span>
          –°–µ—Ä–µ–¥–Ω—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑–∞ –º—ñ—Å—è—Ü—å
        </button>
        <button class="answer-btn" data-correct="true" onclick="checkAnswer(this, 4)">
          <span class="answer-icon">B</span>
          –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –Ω–∞–π–≤–∏—â–æ—é —ñ –Ω–∞–π–Ω–∏–∂—á–æ—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–æ—é
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 4)">
          <span class="answer-icon">C</span>
          –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤–Ω–æ—á—ñ
        </button>
      </div>
    </div>
    
    <div class="question-card">
      <h3 style="color: var(--kid-blue);">
        <i class="fas fa-question-circle"></i> –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 5: –ß–æ–º—É –≤–Ω–æ—á—ñ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –∑–Ω–∏–∂—É—î—Ç—å—Å—è?
      </h3>
      <div class="answer-options">
        <button class="answer-btn" data-correct="true" onclick="checkAnswer(this, 5)">
          <span class="answer-icon">A</span>
          –ó–µ–º–ª—è –≤—ñ–¥–¥–∞—î —Ç–µ–ø–ª–æ, –æ—Ç—Ä–∏–º–∞–Ω–µ –≤–¥–µ–Ω—å
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 5)">
          <span class="answer-icon">B</span>
          –°–æ–Ω—Ü–µ "–≤–∏–º–∏–∫–∞—î—Ç—å—Å—è"
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 5)">
          <span class="answer-icon">C</span>
          –í–Ω–æ—á—ñ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Ö–æ–ª–æ–¥–Ω–∏–π –≤—ñ—Ç–µ—Ä
        </button>
      </div>
    </div>
    
    <div class="question-card">
      <h3 style="color: var(--kid-blue);">
        <i class="fas fa-question-circle"></i> –ó–∞–ø–∏—Ç–∞–Ω–Ω—è 6: –Ø–∫ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è –ø—Ä–∏–ª–∞–¥ –¥–ª—è –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏?
      </h3>
      <div class="answer-options">
        <button class="answer-btn" data-correct="true" onclick="checkAnswer(this, 6)">
          <span class="answer-icon">A</span>
          –¢–µ—Ä–º–æ–º–µ—Ç—Ä
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 6)">
          <span class="answer-icon">B</span>
          –ë–∞—Ä–æ–º–µ—Ç—Ä
        </button>
        <button class="answer-btn" data-correct="false" onclick="checkAnswer(this, 6)">
          <span class="answer-icon">C</span>
          –ê–Ω–µ–º–æ–º–µ—Ç—Ä
        </button>
      </div>
    </div>
    
    <div style="text-align: center; margin-top: 40px;">
      <button class="btn-primary" onclick="checkAllAnswers()" 
              style="background: linear-gradient(145deg, var(--kid-pink), var(--kid-purple)); padding: 20px 40px; font-size: 22px;">
        <i class="fas fa-check-double"></i> –ü–ï–†–ï–í–Ü–†–ò–¢–ò –í–Ü–î–ü–û–í–Ü–î–Ü
      </button>
      
      <div id="quizResult" style="display: none; margin-top: 30px;">
        <div class="message success" id="resultMessage"></div>
      </div>
    </div>
    
    <p id="task4Status" style="margin-top:20px; color:var(--kid-green); text-align:center;"></p>
  </div>

  <!-- –ù–∞–≥–æ—Ä–æ–¥–∞ -->
  <div class="reward-badge" id="rewardBadge">
    <h2>üèÜ –í—ñ—Ç–∞—î–º–æ!</h2>
    <p>–¢–∏ –æ—Ç—Ä–∏–º–∞–≤ <span id="earnedPoints">12</span> –±–∞–ª—ñ–≤!</p>
    <p>–¢–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ.</p>
    <a href="page2.html" class="btn-primary" style="margin-top:15px; display:inline-block;">–î–∞–ª—ñ ‚Üí</a>
  </div>
</div>

<script>
const SHEET_URL = 'https://script.google.com/macros/s/AKfycbx1ok9gz_71vNK7NyDXlGrhkw4QcaDwBsggtJ_7eqE_XRZw_9PLiqPFn-SnpWx9yh3kFA/exec';
let userData = {};
let taskPoints = { task1: 0, task2: 0, task3: 0, task4: 0 };
let userAnswers = {};

document.addEventListener('DOMContentLoaded', () => {
  loadUserData();
  setupSunDrag();
  setupGraphButton();
  setupWeatherForm();
  loadProgress();
});

function loadUserData() {
  const saved = localStorage.getItem('atmosphereUser');
  if (!saved) return window.location.href = 'index.html';
  userData = JSON.parse(saved);
  document.getElementById('userName').textContent = `–ü—Ä–∏–≤—ñ—Ç, ${userData.name}!`;
  document.getElementById('userClass').textContent = `${userData.class}`;
  updatePointsDisplay();
}

function updatePointsDisplay() {
  const total = Object.values(taskPoints).reduce((a, b) => a + b, 0);
  document.getElementById('totalPoints').textContent = total;
}

function loadProgress() {
  const progress = JSON.parse(localStorage.getItem('temperatureProgress6') || '{}');
  taskPoints = { ...taskPoints, ...progress };
  if (taskPoints.task1 > 0) markCompleted(1);
  if (taskPoints.task2 > 0) markCompleted(2);
  if (taskPoints.task3 > 0) markCompleted(3);
  if (taskPoints.task4 > 0) markCompleted(4);
}

function markCompleted(taskNum) {
  document.getElementById(`task${taskNum}Status`).textContent = '‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (+3 –±–∞–ª–∏)';
  document.getElementById(`task${taskNum}Card`)?.classList.add('completed');
}

async function awardPoints(taskName, points) {
  if (taskPoints[taskName] >= points) return;
  taskPoints[taskName] = points;
  localStorage.setItem('temperatureProgress6', JSON.stringify(taskPoints));
  
  try {
    await fetch(SHEET_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        name: userData.name,
        class: userData.class,
        theme: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞',
        points: points
      })
    });
  } catch (e) {
    console.warn('–ù–µ –≤–¥–∞–ª–æ—Å—è –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –±–∞–ª–∏:', e);
  }
  
  updatePointsDisplay();
  if (Object.values(taskPoints).every(p => p > 0)) {
    showReward(12);
  }
}

// === –ó–ê–í–î–ê–ù–ù–Ø 1 ===
function setupSunDrag() {
  const sun = document.getElementById('sun');
  let isDragging = false;

  sun.addEventListener('mousedown', () => {
    isDragging = true;
    if (taskPoints.task1 === 0) {
      awardPoints('task1', 3);
    }
  });

  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const container = sun.parentElement;
    const rect = container.getBoundingClientRect();
    let y = e.clientY - rect.top;
    y = Math.max(50, Math.min(y, rect.height - 50));
    sun.style.top = y + 'px';
    updateTemperatures(y, rect.height);
  });

  document.addEventListener('mouseup', () => isDragging = false);
}

function updateTemperatures(sunY, containerHeight) {
  const baseTemp = 25 - (sunY / containerHeight) * 20;
  [0, 1000, 2000, 3000].forEach((h, i) => {
    const temp = Math.round(baseTemp - (h / 1000) * 6);
    document.getElementById(`temp${i}`).textContent = `${temp > 0 ? '+' : ''}${temp}¬∞C`;
  });
}

// === –ó–ê–í–î–ê–ù–ù–Ø 2 ===
function setupGraphButton() {
  document.getElementById('buildGraphBtn').addEventListener('click', () => {
    if (taskPoints.task2 > 0) return;
    const data = [18, 22, 25, 28, 26, 23, 20, 17];
    const avg = (data.reduce((a,b)=>a+b)/data.length).toFixed(1);
    const amp = Math.max(...data) - Math.min(...data);
    document.getElementById('graphResult').innerHTML = `
      <p><b>–°–µ—Ä–µ–¥–Ω—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:</b> ${avg}¬∞C</p>
      <p><b>–ê–º–ø–ª—ñ—Ç—É–¥–∞:</b> ${amp}¬∞C</p>
      <p>–ì—Ä–∞—Ñ—ñ–∫ –ø–æ–±—É–¥–æ–≤–∞–Ω–æ! ‚úÖ</p>
    `;
    awardPoints('task2', 3);
  });
}

// === –ó–ê–í–î–ê–ù–ù–Ø 3 ===
function setupWeatherForm() {
  document.getElementById('submitWeather').addEventListener('click', () => {
    const input = document.getElementById('weatherInput').value.trim();
    if (!input) return alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –æ–ø–∏—à–∏ –ø–æ–≥–æ–¥—É!');
    if (taskPoints.task3 > 0) return;
    
    const recs = [
      "‚úÖ –£–¥–µ–Ω—å ‚Äî –∑–∞—Ö–∏—â–∞–π—Å—è –≤—ñ–¥ —Å–æ–Ω—Ü—è (–∫–µ–ø–∫–∞, –æ–∫—É–ª—è—Ä–∏).",
      "‚úÖ –ü—Ä–∏ –≥—Ä–æ–∑—ñ ‚Äî –Ω–µ —Å—Ç—ñ–π –ø—ñ–¥ –¥–µ—Ä–µ–≤–æ–º.",
      "‚úÖ –ü—Ä–∏ —Ä—ñ–∑–∫–∏—Ö –∑–º—ñ–Ω–∞—Ö —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏ ‚Äî –æ–¥—è–≥–∞–π—Å—è –ø–æ—à–∞—Ä–æ–≤–æ."
    ].join('<br>');
    
    document.getElementById('recommendations').innerHTML = `<h4>–¢–≤–æ—ó —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:</h4>${recs}`;
    awardPoints('task3', 3);
  });
}

// === –ó–ê–í–î–ê–ù–ù–Ø 4: –¢–ï–°–¢ ===
function checkAnswer(button, questionNum) {
  if (userAnswers[questionNum]) return;
  
  const isCorrect = button.dataset.correct === "true";
  userAnswers[questionNum] = isCorrect;
  
  // –ü–æ–∑–Ω–∞—á–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  const options = button.closest('.question-card').querySelectorAll('.answer-btn');
  options.forEach(opt => {
    opt.disabled = true;
    if (opt.dataset.correct === "true") {
      opt.classList.add('correct');
    } else if (opt === button && !isCorrect) {
      opt.classList.add('wrong');
    }
  });
}

function checkAllAnswers() {
  const totalQuestions = 6;
  const correctCount = Object.values(userAnswers).filter(Boolean).length;
  const points = Math.min(correctCount * 0.5, 3); // –º–∞–∫—Å. 3 –±–∞–ª–∏

  let message = '';
  if (correctCount === 6) message = '–í–Ü–î–ú–Ü–ù–ù–û! üåü';
  else if (correctCount >= 4) message = '–ú–û–õ–û–î–ï–¶–¨! üëç';
  else message = '–ù–ï–ü–û–ì–ê–ù–û! üí™';

  document.getElementById('resultMessage').innerHTML = `
    <div style="font-size:22px; color:var(--kid-green);">
      ${message}<br>
      <div style="font-size:18px; margin-top:10px;">
        –ü—Ä–∞–≤–∏–ª—å–Ω–∏—Ö: ${correctCount} –∑ ${totalQuestions}<br>
        –ë–∞–ª—ñ–≤: ${points.toFixed(1)}
      </div>
    </div>
  `;
  document.getElementById('quizResult').style.display = 'block';

  if (taskPoints.task4 === 0) {
    awardPoints('task4', points);
    markCompleted(4);
  }
}

function showReward(points) {
  document.getElementById('earnedPoints').textContent = points;
  document.getElementById('rewardBadge').style.display = 'block';
}
</script>
</body>
</html>
